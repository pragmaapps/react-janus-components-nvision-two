/*! For license information please see react-janus-components.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.reactJanusComponents=t(require("react")):e.reactJanusComponents=t(e.react)}(self,e=>(()=>{var t={72(e,t,n){"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function a(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],o=0;o<e.length;o++){var s=e[o],c=t.base?s[0]+t.base:s[0],d=n[c]||0,u="".concat(c," ").concat(d);n[c]=d+1;var l=a(u),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==l?(i[l].references++,i[l].updater(p)):i.push({identifier:u,updater:m(p,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function l(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,h=0;function m(e,t){var n,r,o;if(t.singleton){var i=h++;n=f||(f=c(t)),r=l.bind(null,n,i,!1),o=l.bind(null,n,i,!0)}else n=c(t),r=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);i[o].references--}for(var c=s(e,t),d=0;d<n.length;d++){var u=a(n[d]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=c}}}},155(t){"use strict";t.exports=e},216(e,t,n){var r=n(72),o=n(523);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},314(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},523(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,"body{\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\n}\n\n.janus-video{\n  width: 500px;\n  height: 500px;\n}\n\n.video-react.video-react-fluid, .video-react.video-react-16-9, .video-react.video-react-4-3 {\n    width: 100%;\n    max-width: 100%;\n    height: 0;\n}\n.video-react .video-react-video {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n.video-react {\n    display: block;\n    vertical-align: top;\n    box-sizing: border-box;\n    color: #fff;\n    background-color: #000;\n    position: relative;\n    font-size: 10px;\n    line-height: 1;\n    font-family: serif, Times, \"Times New Roman\";\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n.janus-video-container{\n  background-color: #000;\n  width: 100%;\n}\n.janus-video-container .video-react.video-react-fluid {\n  padding-top: 62.5% !important\n}\n.janus-video-player{\n  width: 100%;\n  height: 300px;\n}\n\n.janus-video-status{\n  width: 100%;\n  position: absolute;\n  z-index: 100;\n  height: 20px;\n  padding-right: 10px;\n  padding-top: 5px;\n  text-align: right;\n  color: #fff;\n  font-size: 12px;\n}\n\n.janus-video-controls{\n  height: 40px;\n  background-color: #333;\n  display: flex;\n  flex-direction: row;\n  padding-left:10px;\n  padding-top: 5px;\n}\n\n.janus-btn{\n  font-size: 12px;\n  margin-right: 10px;\n  color: #fff;\n  border: 1px solid #fff;\n  border-radius: 5px;\n  height: 20px;\n  padding: 5px;\n  line-height: 20px;\n}\n\n.janus-btn:hover{\n  cursor: pointer;\n  background-color: #0000009a;\n}\n\n.janus-select{\n  margin-left: auto;\n  padding-right: 10px;\n  padding-top: 3px;\n}\n\n.janus-select select{\n  background-color: #0c71a0;\n  color: #fff;\n  padding: 5px;\n  border: 1px solid #fff;\n  border-radius: 5px;\n  /* height: 50px; */\n  appearance: none;\n  /* line-height: 50px */\n}\n\n.janus-select select:focus{\n  outline: none;\n}",""]);const s=a},601(e){"use strict";e.exports=function(e){return e[1]}},677(e,t,n){"use strict";var r=n(963);function o(e,t,n,o,i){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(o?o.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),a=r(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(r){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!o(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}}),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function d(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout(function(){t._dispatchEvent("track",i)})}var u=function(n){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){o[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=o?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},u.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},u.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},u.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},u.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},u.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},u.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var d=r.writeCandidate(s);a.candidate=Object.assign(a.candidate,r.parseCandidate(d)),a.candidate.candidate=d,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var u=r.getMediaSections(o._localDescription.sdp);u[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+u.join("");var l=o.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",a),l&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout(function(){a.forEach(function(e){i.onlocalcandidate(e)})},0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,n,o){var a=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},u.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n}),o.transceivers.forEach(function(e,t){o._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=o.transceivers[t],c=a.iceGatherer,d=a.iceTransport,u=a.dtlsTransport,l=a.localCapabilities,p=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var f=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===d.state&&d.start(c,f,s?"controlling":"controlled"),"new"===u.state&&u.start(h));var m=i(l,p);o._transceive(a,m.codecs.length>0,!1)}})}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(o){var u=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,u.signalingState)||u._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+u.signalingState));var l={};u.remoteStreams.forEach(function(e){l[e.id]=e});var p=[],f=r.splitSections(o.sdp),h=f.shift(),m=r.matchPrefix(h,"a=ice-lite").length>0,v=r.matchPrefix(h,"a=group:BUNDLE ").length>0;u.usingBundle=v;var g=r.matchPrefix(h,"a=ice-options:")[0];return u.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,f.forEach(function(a,c){var d=r.splitLines(a),f=r.getKind(a),g=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,y=d[0].substr(2).split(" ")[2],b=r.getDirection(a,h),S=r.parseMsid(a),C=r.getMid(a)||r.generateIdentifier();if(g||"application"===f&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))u.transceivers[c]={mid:C,kind:f,protocol:y,rejected:!0};else{var w,T,k,x,E,R,P,j,D;!g&&u.transceivers[c]&&u.transceivers[c].rejected&&(u.transceivers[c]=u._createTransceiver(f,!0));var I,A,_=r.parseRtpParameters(a);g||(I=r.getIceParameters(a,h),(A=r.getDtlsParameters(a,h)).role="client"),P=r.parseRtpEncodingParameters(a);var O=r.parseRtcpParameters(a),M=r.matchPrefix(a,"a=end-of-candidates",h).length>0,N=r.matchPrefix(a,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===o.type||"answer"===o.type)&&!g&&v&&c>0&&u.transceivers[c]&&(u._disposeIceAndDtlsTransports(c),u.transceivers[c].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[c].iceTransport=u.transceivers[0].iceTransport,u.transceivers[c].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[c].rtpSender&&u.transceivers[c].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[c].rtpReceiver&&u.transceivers[c].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),"offer"!==o.type||g)"answer"!==o.type||g||(T=(w=u.transceivers[c]).iceGatherer,k=w.iceTransport,x=w.dtlsTransport,E=w.rtpReceiver,R=w.sendEncodingParameters,j=w.localCapabilities,u.transceivers[c].recvEncodingParameters=P,u.transceivers[c].remoteCapabilities=_,u.transceivers[c].rtcpParameters=O,N.length&&"new"===k.state&&(!m&&!M||v&&0!==c?N.forEach(function(e){s(w.iceTransport,e)}):k.setRemoteCandidates(N)),v&&0!==c||("new"===k.state&&k.start(T,I,"controlling"),"new"===x.state&&x.start(A)),!i(w.localCapabilities,w.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,u._transceive(w,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!E||"sendrecv"!==b&&"sendonly"!==b?delete w.rtpReceiver:(D=E.track,S?(l[S.stream]||(l[S.stream]=new e.MediaStream),n(D,l[S.stream]),p.push([D,E,l[S.stream]])):(l.default||(l.default=new e.MediaStream),n(D,l.default),p.push([D,E,l.default]))));else{(w=u.transceivers[c]||u._createTransceiver(f)).mid=C,w.iceGatherer||(w.iceGatherer=u._createIceGatherer(c,v)),N.length&&"new"===w.iceTransport.state&&(!M||v&&0!==c?N.forEach(function(e){s(w.iceTransport,e)}):w.iceTransport.setRemoteCandidates(N)),j=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(j.codecs=j.codecs.filter(function(e){return"rtx"!==e.name})),R=w.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,F=!1;"sendrecv"===b||"sendonly"===b?(F=!w.rtpReceiver,E=w.rtpReceiver||new e.RTCRtpReceiver(w.dtlsTransport,f),F&&(D=E.track,S&&"-"===S.stream||(S?(l[S.stream]||(l[S.stream]=new e.MediaStream,Object.defineProperty(l[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(D,"id",{get:function(){return S.track}}),L=l[S.stream]):(l.default||(l.default=new e.MediaStream),L=l.default)),L&&(n(D,L),w.associatedRemoteMediaStreams.push(L)),p.push([D,E,L]))):w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach(function(t){var n=t.getTracks().find(function(e){return e.id===w.rtpReceiver.track.id});n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)}),w.associatedRemoteMediaStreams=[]),w.localCapabilities=j,w.remoteCapabilities=_,w.rtpReceiver=E,w.rtcpParameters=O,w.sendEncodingParameters=R,w.recvEncodingParameters=P,u._transceive(u.transceivers[c],!1,F)}}}),void 0===u._dtlsRole&&(u._dtlsRole="offer"===o.type?"active":"passive"),u._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(l).forEach(function(t){var n=l[t];if(n.getTracks().length){if(-1===u.remoteStreams.indexOf(n)){u.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){u._dispatchEvent("addstream",r)})}p.forEach(function(e){var t=e[0],r=e[1];n.id===e[2].id&&d(u,t,r,[n])})}}),p.forEach(function(e){e[2]||d(u,e[0],e[1],[])}),e.setTimeout(function(){u&&u.transceivers&&u.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},u.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},u.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter(function(e){return"audio"===e.kind}).length,a=n.transceivers.filter(function(e){return"video"===e.kind}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});i>0||a>0;)i>0&&(n._createTransceiver("audio"),i--),a>0&&(n._createTransceiver("video"),a--);var d=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(o,i){var a=o.track,s=o.kind,c=o.mid||r.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(i,n.usingBundle));var d=e.RTCRtpSender.getCapabilities(s);t<15019&&(d.codecs=d.codecs.filter(function(e){return"rtx"!==e.name})),d.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),d.headerExtensions.forEach(function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var u=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===s&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=d,o.sendEncodingParameters=u}),"max-compat"!==n._config.bundlePolicy&&(d+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),d+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){d+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),d+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,d+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(d+="a=end-of-candidates\r\n"))});var u=new e.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(u)},u.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var d=i(e.localCapabilities,e.remoteCapabilities);!d.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,d,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}});var d=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(d)},u.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(o,i){if(!n._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===e.sdpMid){a=d;break}var u=n.transceivers[a];if(!u)return i(c("OperationError","Can not add ICE candidate"));if(u.rejected)return o();var l=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return o();if(l.component&&1!==l.component)return o();if((0===a||a>0&&u.iceTransport!==n.transceivers[0].iceTransport)&&!s(u.iceTransport,l))return i(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(l.type?p:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);o()})},u.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var l=["createOffer","createAnswer"];return l.forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),u}},692(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(r,o){"use strict";var i=[],a=Object.getPrototypeOf,s=i.slice,c=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},d=i.push,u=i.indexOf,l={},p=l.toString,f=l.hasOwnProperty,h=f.toString,m=h.call(Object),v={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,n){var r,o,i=(n=n||b).createElement("script");if(i.text=e,t)for(r in S)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,o);n.head.appendChild(i).parentNode.removeChild(i)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[p.call(e)]||"object":typeof e}var T="3.7.1",k=/HTML$/i,x=function(e,t){return new x.fn.init(e,t)};function E(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}x.fn=x.prototype={jquery:T,constructor:x,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:d,sort:i.sort,splice:i.splice},x.extend=x.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,c=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(d&&r&&(x.isPlainObject(r)||(o=Array.isArray(r)))?(n=a[t],i=o&&!Array.isArray(n)?[]:o||x.isPlainObject(n)?n:{},o=!1,a[t]=x.extend(d,i,r)):void 0!==r&&(a[t]=r));return a},x.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e)||(t=a(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||h.call(n)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){C(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,o=e.nodeType;if(!o)for(;t=e[r++];)n+=x.text(t);return 1===o||11===o?e.textContent:9===o?e.documentElement.textContent:3===o||4===o?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?x.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!k.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,i=0,a=[];if(E(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&a.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&a.push(o);return c(a)},guid:1,support:v}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=i[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var P=i.pop,j=i.sort,D=i.splice,I="[\\x20\\t\\r\\n\\f]",A=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g");x.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var _=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}x.escapeSelector=function(e){return(e+"").replace(_,O)};var M=b,N=d;!function(){var e,t,n,o,a,c,d,l,p,h,m=N,g=x.expando,y=0,b=0,S=ee(),C=ee(),w=ee(),T=ee(),k=function(e,t){return e===t&&(a=!0),0},E="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",_="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",O="\\["+I+"*("+_+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+_+"))|)"+I+"*\\]",L=":("+_+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",F=new RegExp(I+"+","g"),q=new RegExp("^"+I+"*,"+I+"*"),G=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),U=new RegExp(I+"|>"),H=new RegExp(L),V=new RegExp("^"+_+"$"),W={ID:new RegExp("^#("+_+")"),CLASS:new RegExp("^\\.("+_+")"),TAG:new RegExp("^("+_+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+E+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},B=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),K=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Y=function(){ce()},Q=pe(function(e){return!0===e.disabled&&R(e,"fieldset")},{dir:"parentNode",next:"legend"});try{m.apply(i=s.call(M.childNodes),M.childNodes),i[M.childNodes.length].nodeType}catch(e){m={apply:function(e,t){N.apply(e,s.call(t))},call:function(e){N.apply(e,s.call(arguments,1))}}}function Z(e,t,n,r){var o,i,a,s,d,u,f,h=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(ce(t),t=t||c,l)){if(11!==y&&(d=z.exec(e)))if(o=d[1]){if(9===y){if(!(a=t.getElementById(o)))return n;if(a.id===o)return m.call(n,a),n}else if(h&&(a=h.getElementById(o))&&Z.contains(t,a)&&a.id===o)return m.call(n,a),n}else{if(d[2])return m.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(o)),n}if(!(T[e+" "]||p&&p.test(e))){if(f=e,h=t,1===y&&(U.test(e)||G.test(e))){for((h=$.test(e)&&se(t.parentNode)||t)==t&&v.scope||((s=t.getAttribute("id"))?s=x.escapeSelector(s):t.setAttribute("id",s=g)),i=(u=ue(e)).length;i--;)u[i]=(s?"#"+s:":scope")+" "+le(u[i]);f=u.join(",")}try{return m.apply(n,h.querySelectorAll(f)),n}catch(t){T(e,!0)}finally{s===g&&t.removeAttribute("id")}}}return ye(e.replace(A,"$1"),t,n,r)}function ee(){var e=[];return function n(r,o){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=o}}function te(e){return e[g]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return R(t,"input")&&t.type===e}}function oe(e){return function(t){return(R(t,"input")||R(t,"button"))&&t.type===e}}function ie(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Q(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ae(e){return te(function(t){return t=+t,te(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function se(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var n,r=e?e.ownerDocument||e:M;return r!=c&&9===r.nodeType&&r.documentElement?(d=(c=r).documentElement,l=!x.isXMLDoc(c),h=d.matches||d.webkitMatchesSelector||d.msMatchesSelector,d.msMatchesSelector&&M!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",Y),v.getById=ne(function(e){return d.appendChild(e).id=x.expando,!c.getElementsByName||!c.getElementsByName(x.expando).length}),v.disconnectedMatch=ne(function(e){return h.call(e,"*")}),v.scope=ne(function(){return c.querySelectorAll(":scope")}),v.cssHas=ne(function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),v.getById?(t.filter.ID=function(e){var t=e.replace(X,K);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&l){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(X,K);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&l){var n,r,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&l)return t.getElementsByClassName(e)},p=[],ne(function(e){var t;d.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||p.push("\\["+I+"*(?:value|"+E+")"),e.querySelectorAll("[id~="+g+"-]").length||p.push("~="),e.querySelectorAll("a#"+g+"+*").length||p.push(".#.+[+~]"),e.querySelectorAll(":checked").length||p.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||p.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")")}),v.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),k=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==M&&Z.contains(M,e)?-1:t===c||t.ownerDocument==M&&Z.contains(M,t)?1:o?u.call(o,e)-u.call(o,t):0:4&n?-1:1)},c):c}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ce(e),l&&!T[t+" "]&&(!p||!p.test(t)))try{var n=h.call(e,t);if(n||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&ce(e),x.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=c&&ce(e);var r=t.attrHandle[n.toLowerCase()],o=r&&f.call(t.attrHandle,n.toLowerCase())?r(e,n,!l):void 0;return void 0!==o?o:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},x.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!v.sortStable,o=!v.sortStable&&s.call(e,0),j.call(e,k),a){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)D.call(e,n[r],1)}return o=null,e},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(s.apply(this)))},t=x.expr={cacheLength:50,createPseudo:te,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,K),e[3]=(e[3]||e[4]||e[5]||"").replace(X,K),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(X,K).toLowerCase();return"*"===e?function(){return!0}:function(e){return R(e,t)}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=Z.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var d,u,l,p,f,h=i!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!c&&!s,S=!1;if(m){if(i){for(;h;){for(l=t;l=l[h];)if(s?R(l,v):1===l.nodeType)return!1;f=h="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&b){for(S=(p=(d=(u=m[g]||(m[g]={}))[e]||[])[0]===y&&d[1])&&d[2],l=p&&m.childNodes[p];l=++p&&l&&l[h]||(S=p=0)||f.pop();)if(1===l.nodeType&&++S&&l===t){u[e]=[y,p,S];break}}else if(b&&(S=p=(d=(u=t[g]||(t[g]={}))[e]||[])[0]===y&&d[1]),!1===S)for(;(l=++p&&l&&l[h]||(S=p=0)||f.pop())&&(!(s?R(l,v):1===l.nodeType)||!++S||(b&&((u=l[g]||(l[g]={}))[e]=[y,S]),l!==t)););return(S-=o)===r||S%r===0&&S/r>=0}}},PSEUDO:function(e,n){var r,o=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return o[g]?o(n):o.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)e[r=u.call(e,i[a])]=!(t[r]=i[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:te(function(e){var t=[],n=[],r=ge(e.replace(A,"$1"));return r[g]?te(function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:te(function(e){return function(t){return Z(e,t).length>0}}),contains:te(function(e){return e=e.replace(X,K),function(t){return(t.textContent||x.text(t)).indexOf(e)>-1}}),lang:te(function(e){return V.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(X,K).toLowerCase(),function(t){var n;do{if(n=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===d},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ie(!1),disabled:ie(!0),checked:function(e){return R(e,"input")&&!!e.checked||R(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return B.test(e.nodeName)},button:function(e){return R(e,"input")&&"button"===e.type||R(e,"button")},text:function(e){var t;return R(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae(function(){return[0]}),last:ae(function(e,t){return[t-1]}),eq:ae(function(e,t,n){return[n<0?n+t:n]}),even:ae(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ae(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ae(function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:ae(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=oe(e);function de(){}function ue(e,n){var r,o,i,a,s,c,d,u=C[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],d=t.preFilter;s;){for(a in r&&!(o=q.exec(s))||(o&&(s=s.slice(o[0].length)||s),c.push(i=[])),r=!1,(o=G.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(A," ")}),s=s.slice(r.length)),t.filter)!(o=W[a].exec(s))||d[a]&&!(o=d[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?Z.error(e):C(e,c).slice(0)}function le(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function pe(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=b++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,c){var d,u,l=[y,s];if(c){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=t[g]||(t[g]={}),o&&R(t,o))t=t[r]||t;else{if((d=u[i])&&d[0]===y&&d[1]===s)return l[2]=d[2];if(u[i]=l,l[2]=e(t,n,c))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function he(e,t,n,r,o){for(var i,a=[],s=0,c=e.length,d=null!=t;s<c;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),d&&t.push(s)));return a}function me(e,t,n,r,o,i){return r&&!r[g]&&(r=me(r)),o&&!o[g]&&(o=me(o,i)),te(function(i,a,s,c){var d,l,p,f,h=[],v=[],g=a.length,y=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)Z(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?y:he(y,h,e,s,c);if(n?n(b,f=o||(i?e:g||r)?[]:a,s,c):f=b,r)for(d=he(f,v),r(d,[],s,c),l=d.length;l--;)(p=d[l])&&(f[v[l]]=!(b[v[l]]=p));if(i){if(o||e){if(o){for(d=[],l=f.length;l--;)(p=f[l])&&d.push(b[l]=p);o(null,f=[],d,c)}for(l=f.length;l--;)(p=f[l])&&(d=o?u.call(i,p):h[l])>-1&&(i[d]=!(a[d]=p))}}else f=he(f===a?f.splice(g,f.length):f),o?o(null,a,f,c):m.apply(a,f)})}function ve(e){for(var r,o,i,a=e.length,s=t.relative[e[0].type],c=s||t.relative[" "],d=s?1:0,l=pe(function(e){return e===r},c,!0),p=pe(function(e){return u.call(r,e)>-1},c,!0),f=[function(e,t,o){var i=!s&&(o||t!=n)||((r=t).nodeType?l(e,t,o):p(e,t,o));return r=null,i}];d<a;d++)if(o=t.relative[e[d].type])f=[pe(fe(f),o)];else{if((o=t.filter[e[d].type].apply(null,e[d].matches))[g]){for(i=++d;i<a&&!t.relative[e[i].type];i++);return me(d>1&&fe(f),d>1&&le(e.slice(0,d-1).concat({value:" "===e[d-2].type?"*":""})).replace(A,"$1"),o,d<i&&ve(e.slice(d,i)),i<a&&ve(e=e.slice(i)),i<a&&le(e))}f.push(o)}return fe(f)}function ge(e,r){var o,i=[],a=[],s=w[e+" "];if(!s){for(r||(r=ue(e)),o=r.length;o--;)(s=ve(r[o]))[g]?i.push(s):a.push(s);s=w(e,function(e,r){var o=r.length>0,i=e.length>0,a=function(a,s,d,u,p){var f,h,v,g=0,b="0",S=a&&[],C=[],w=n,T=a||i&&t.find.TAG("*",p),k=y+=null==w?1:Math.random()||.1,E=T.length;for(p&&(n=s==c||s||p);b!==E&&null!=(f=T[b]);b++){if(i&&f){for(h=0,s||f.ownerDocument==c||(ce(f),d=!l);v=e[h++];)if(v(f,s||c,d)){m.call(u,f);break}p&&(y=k)}o&&((f=!v&&f)&&g--,a&&S.push(f))}if(g+=b,o&&b!==g){for(h=0;v=r[h++];)v(S,C,s,d);if(a){if(g>0)for(;b--;)S[b]||C[b]||(C[b]=P.call(u));C=he(C)}m.apply(u,C),p&&!a&&C.length>0&&g+r.length>1&&x.uniqueSort(u)}return p&&(y=k,n=w),S};return o?te(a):a}(a,i)),s.selector=e}return s}function ye(e,n,r,o){var i,a,s,c,d,u="function"==typeof e&&e,p=!o&&ue(e=u.selector||e);if(r=r||[],1===p.length){if((a=p[0]=p[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&l&&t.relative[a[1].type]){if(!(n=(t.find.ID(s.matches[0].replace(X,K),n)||[])[0]))return r;u&&(n=n.parentNode),e=e.slice(a.shift().value.length)}for(i=W.needsContext.test(e)?0:a.length;i--&&(s=a[i],!t.relative[c=s.type]);)if((d=t.find[c])&&(o=d(s.matches[0].replace(X,K),$.test(a[0].type)&&se(n.parentNode)||n))){if(a.splice(i,1),!(e=o.length&&le(a)))return m.apply(r,o),r;break}}return(u||ge(e,p))(o,n,!l,r,!n||$.test(e)&&se(n.parentNode)||n),r}de.prototype=t.filters=t.pseudos,t.setFilters=new de,v.sortStable=g.split("").sort(k).join("")===g,ce(),v.sortDetached=ne(function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))}),x.find=Z,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,Z.compile=ge,Z.select=ye,Z.setDocument=ce,Z.tokenize=ue,Z.escape=x.escapeSelector,Z.getText=x.text,Z.isXML=x.isXMLDoc,Z.selectors=x.expr,Z.support=x.support,Z.uniqueSort=x.uniqueSort}();var L=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&x(e).is(n))break;r.push(e)}return r},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},q=x.expr.match.needsContext,G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(e,t,n){return g(t)?x.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?x.grep(e,function(e){return e===t!==n}):"string"!=typeof t?x.grep(e,function(e){return u.call(t,e)>-1!==n}):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<r;t++)if(x.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,o[t],n);return r>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(U(this,e||[],!1))},not:function(e){return this.pushStack(U(this,e||[],!0))},is:function(e){return!!U(this,"string"==typeof e&&q.test(e)?x(e):e||[],!1).length}});var H,V=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||H,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:V.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),G.test(r[1])&&x.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=b.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,H=x(b);var W=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function J(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&x(e);if(!q.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?x.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?u.call(x(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return L(e,"parentNode")},parentsUntil:function(e,t,n){return L(e,"parentNode",n)},next:function(e){return J(e,"nextSibling")},prev:function(e){return J(e,"previousSibling")},nextAll:function(e){return L(e,"nextSibling")},prevAll:function(e){return L(e,"previousSibling")},nextUntil:function(e,t,n){return L(e,"nextSibling",n)},prevUntil:function(e,t,n){return L(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(R(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},function(e,t){x.fn[e]=function(n,r){var o=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=x.filter(r,o)),this.length>1&&(B[e]||x.uniqueSort(o),W.test(e)&&o.reverse()),this.pushStack(o)}});var z=/[^\x20\t\r\n\f]+/g;function $(e){return e}function X(e){throw e}function K(e,t,n,r){var o;try{e&&g(o=e.promise)?o.call(e).done(t).fail(n):e&&g(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(z)||[],function(e,n){t[n]=!0}),t}(e):x.extend({},e);var t,n,r,o,i=[],a=[],s=-1,c=function(){for(o=o||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},d={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){x.each(n,function(n,r){g(r)?e.unique&&d.has(r)||i.push(r):r&&r.length&&"string"!==w(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return x.each(arguments,function(e,t){for(var n;(n=x.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?x.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,r){var o=g(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=o&&o.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,n,o){var i=0;function a(e,t,n,o){return function(){var s=this,c=arguments,d=function(){var r,d;if(!(e<i)){if((r=n.apply(s,c))===t.promise())throw new TypeError("Thenable self-resolution");d=r&&("object"==typeof r||"function"==typeof r)&&r.then,g(d)?o?d.call(r,a(i,t,$,o),a(i,t,X,o)):(i++,d.call(r,a(i,t,$,o),a(i,t,X,o),a(i,t,$,t.notifyWith))):(n!==$&&(s=void 0,c=[r]),(o||t.resolveWith)(s,c))}},u=o?d:function(){try{d()}catch(r){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(r,u.error),e+1>=i&&(n!==X&&(s=void 0,c=[r]),t.rejectWith(s,c))}};e?u():(x.Deferred.getErrorHook?u.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(u.error=x.Deferred.getStackHook()),r.setTimeout(u))}}return x.Deferred(function(r){t[0][3].add(a(0,r,g(o)?o:$,r.notifyWith)),t[1][3].add(a(0,r,g(e)?e:$)),t[2][3].add(a(0,r,g(n)?n:X))}).promise()},promise:function(e){return null!=e?x.extend(e,o):o}},i={};return x.each(t,function(e,r){var a=r[2],s=r[5];o[r[1]]=a.add,s&&a.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),i[r[0]]=function(){return i[r[0]+"With"](this===i?void 0:this,arguments),this},i[r[0]+"With"]=a.fireWith}),o.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),o=s.call(arguments),i=x.Deferred(),a=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?s.call(arguments):n,--t||i.resolveWith(r,o)}};if(t<=1&&(K(e,i.done(a(n)).resolve,i.reject,!t),"pending"===i.state()||g(o[n]&&o[n].then)))return i.then();for(;n--;)K(o[n],a(n),i.reject);return i.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&Y.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){r.setTimeout(function(){throw e})};var Q=x.Deferred();function Z(){b.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),x.ready()}x.fn.ready=function(e){return Q.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||Q.resolveWith(b,[x]))}}),x.ready.then=Q.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(x.ready):(b.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,o,i,a){var s=0,c=e.length,d=null==n;if("object"===w(n))for(s in o=!0,n)ee(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,g(r)||(a=!0),d&&(a?(t.call(e,r),t=null):(d=t,t=function(e,t,n){return d.call(x(e),n)})),t))for(;s<c;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:d?t.call(e):c?t(e[0],n):i},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function oe(e){return e.replace(te,"ms-").replace(ne,re)}var ie=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ae(){this.expando=x.expando+ae.uid++}ae.uid=1,ae.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ie(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[oe(t)]=n;else for(r in t)o[oe(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][oe(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(oe):(t=oe(t))in r?[t]:t.match(z)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var se=new ae,ce=new ae,de=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function le(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:de.test(e)?JSON.parse(e):e)}(n)}catch(e){}ce.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return ce.hasData(e)||se.hasData(e)},data:function(e,t,n){return ce.access(e,t,n)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=ce.get(i),1===i.nodeType&&!se.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=oe(r.slice(5)),le(i,r,o[r]));se.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ce.set(this,e)}):ee(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=ce.get(i,e))||void 0!==(n=le(i,e))?n:void 0;this.each(function(){ce.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ce.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),n&&(!r||Array.isArray(n)?r=se.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,o=n.shift(),i=x._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,function(){x.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:x.Callbacks("once memory").add(function(){se.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=x.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=se.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+pe+")([a-z%]*)$","i"),he=["Top","Right","Bottom","Left"],me=b.documentElement,ve=function(e){return x.contains(e.ownerDocument,e)},ge={composed:!0};me.getRootNode&&(ve=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ve(e)&&"none"===x.css(e,"display")};function be(e,t,n,r){var o,i,a=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},c=s(),d=n&&n[3]||(x.cssNumber[t]?"":"px"),u=e.nodeType&&(x.cssNumber[t]||"px"!==d&&+c)&&fe.exec(x.css(e,t));if(u&&u[3]!==d){for(c/=2,d=d||u[3],u=+c||1;a--;)x.style(e,t,u+d),(1-i)*(1-(i=s()/c||.5))<=0&&(a=0),u/=i;u*=2,x.style(e,t,u+d),n=n||[]}return n&&(u=+u||+c||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=d,r.start=u,r.end=o)),o}var Se={};function Ce(e){var t,n=e.ownerDocument,r=e.nodeName,o=Se[r];return o||(t=n.body.appendChild(n.createElement(r)),o=x.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),Se[r]=o,o)}function we(e,t){for(var n,r,o=[],i=0,a=e.length;i<a;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(o[i]=se.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&ye(r)&&(o[i]=Ce(r))):"none"!==n&&(o[i]="none",se.set(r,"display",n)));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}x.fn.extend({show:function(){return we(this,!0)},hide:function(){return we(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ye(this)?x(this).show():x(this).hide()})}});var Te,ke,xe=/^(?:checkbox|radio)$/i,Ee=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Re=/^$|^module$|\/(?:java|ecma)script/i;Te=b.createDocumentFragment().appendChild(b.createElement("div")),(ke=b.createElement("input")).setAttribute("type","radio"),ke.setAttribute("checked","checked"),ke.setAttribute("name","t"),Te.appendChild(ke),v.checkClone=Te.cloneNode(!0).cloneNode(!0).lastChild.checked,Te.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Te.cloneNode(!0).lastChild.defaultValue,Te.innerHTML="<option></option>",v.option=!!Te.lastChild;var Pe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function je(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?x.merge([e],n):n}function De(e,t){for(var n=0,r=e.length;n<r;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,v.option||(Pe.optgroup=Pe.option=[1,"<select multiple='multiple'>","</select>"]);var Ie=/<|&#?\w+;/;function Ae(e,t,n,r,o){for(var i,a,s,c,d,u,l=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if((i=e[f])||0===i)if("object"===w(i))x.merge(p,i.nodeType?[i]:i);else if(Ie.test(i)){for(a=a||l.appendChild(t.createElement("div")),s=(Ee.exec(i)||["",""])[1].toLowerCase(),c=Pe[s]||Pe._default,a.innerHTML=c[1]+x.htmlPrefilter(i)+c[2],u=c[0];u--;)a=a.lastChild;x.merge(p,a.childNodes),(a=l.firstChild).textContent=""}else p.push(t.createTextNode(i));for(l.textContent="",f=0;i=p[f++];)if(r&&x.inArray(i,r)>-1)o&&o.push(i);else if(d=ve(i),a=je(l.appendChild(i),"script"),d&&De(a),n)for(u=0;i=a[u++];)Re.test(i.type||"")&&n.push(i);return l}var _e=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Me(){return!1}function Ne(e,t,n,r,o,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ne(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Me;else if(!o)return e;return 1===i&&(a=o,o=function(e){return x().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=x.guid++)),e.each(function(){x.event.add(this,t,o,r,n)})}function Le(e,t,n){n?(se.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var n,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),se.set(this,t,r),this[t](),n=se.get(this,t),se.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(se.set(this,t,x.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Oe)}})):void 0===se.get(e,t)&&x.event.add(e,t,Oe)}x.event={global:{},add:function(e,t,n,r,o){var i,a,s,c,d,u,l,p,f,h,m,v=se.get(e);if(ie(e))for(n.handler&&(n=(i=n).handler,o=i.selector),o&&x.find.matchesSelector(me,o),n.guid||(n.guid=x.guid++),(c=v.events)||(c=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(z)||[""]).length;d--;)f=m=(s=_e.exec(t[d])||[])[1],h=(s[2]||"").split(".").sort(),f&&(l=x.event.special[f]||{},f=(o?l.delegateType:l.bindType)||f,l=x.event.special[f]||{},u=x.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:h.join(".")},i),(p=c[f])||((p=c[f]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(f,a)),l.add&&(l.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),x.event.global[f]=!0)},remove:function(e,t,n,r,o){var i,a,s,c,d,u,l,p,f,h,m,v=se.hasData(e)&&se.get(e);if(v&&(c=v.events)){for(d=(t=(t||"").match(z)||[""]).length;d--;)if(f=m=(s=_e.exec(t[d])||[])[1],h=(s[2]||"").split(".").sort(),f){for(l=x.event.special[f]||{},p=c[f=(r?l.delegateType:l.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=p.length;i--;)u=p[i],!o&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(i,1),u.selector&&p.delegateCount--,l.remove&&l.remove.call(e,u));a&&!p.length&&(l.teardown&&!1!==l.teardown.call(e,h,v.handle)||x.removeEvent(e,f,v.handle),delete c[f])}else for(f in c)x.event.remove(e,f+t[d],n,r,!0);x.isEmptyObject(c)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=new Array(arguments.length),c=x.event.fix(e),d=(se.get(this,"events")||Object.create(null))[c.type]||[],u=x.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(a=x.event.handlers.call(this,c,d),t=0;(o=a[t++])&&!c.isPropagationStopped();)for(c.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==i.namespace&&!c.rnamespace.test(i.namespace)||(c.handleObj=i,c.data=i.data,void 0!==(r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,o,i,a,s=[],c=t.delegateCount,d=e.target;if(c&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(i=[],a={},n=0;n<c;n++)void 0===a[o=(r=t[n]).selector+" "]&&(a[o]=r.needsContext?x(o,this).index(d)>-1:x.find(o,this,null,[d]).length),a[o]&&i.push(r);i.length&&s.push({elem:d,handlers:i})}return d=this,c<t.length&&s.push({elem:d,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return xe.test(t.type)&&t.click&&R(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return xe.test(t.type)&&t.click&&R(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return xe.test(t.type)&&t.click&&R(t,"input")&&se.get(t,"click")||R(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Me,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Me,isPropagationStopped:Me,isImmediatePropagationStopped:Me,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(b.documentMode){var n=se.get(this,"handle"),r=x.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else x.event.simulate(t,e.target,x.event.fix(e))}x.event.special[e]={setup:function(){var r;if(Le(this,e,!0),!b.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(r||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},x.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=b.documentMode?this:r,i=se.get(o,t);i||(b.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),se.set(o,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=b.documentMode?this:r,i=se.get(o,t)-1;i?se.set(o,t,i):(b.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),se.remove(o,t))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||x.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.fn.extend({on:function(e,t,n,r){return Ne(this,e,t,n,r)},one:function(e,t,n,r){return Ne(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Me),this.each(function(){x.event.remove(this,e,n,t)})}});var Fe=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ue(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ve(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function We(e,t){var n,r,o,i,a,s;if(1===t.nodeType){if(se.hasData(e)&&(s=se.get(e).events))for(o in se.remove(t,"handle events"),s)for(n=0,r=s[o].length;n<r;n++)x.event.add(t,o,s[o][n]);ce.hasData(e)&&(i=ce.access(e),a=x.extend({},i),ce.set(t,a))}}function Be(e,t){var n=t.nodeName.toLowerCase();"input"===n&&xe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Je(e,t,n,r){t=c(t);var o,i,a,s,d,u,l=0,p=e.length,f=p-1,h=t[0],m=g(h);if(m||p>1&&"string"==typeof h&&!v.checkClone&&qe.test(h))return e.each(function(o){var i=e.eq(o);m&&(t[0]=h.call(this,o,i.html())),Je(i,t,n,r)});if(p&&(i=(o=Ae(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=i),i||r)){for(s=(a=x.map(je(o,"script"),He)).length;l<p;l++)d=o,l!==f&&(d=x.clone(d,!0,!0),s&&x.merge(a,je(d,"script"))),n.call(e[l],d,l);if(s)for(u=a[a.length-1].ownerDocument,x.map(a,Ve),l=0;l<s;l++)d=a[l],Re.test(d.type||"")&&!se.access(d,"globalEval")&&x.contains(u,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?x._evalUrl&&!d.noModule&&x._evalUrl(d.src,{nonce:d.nonce||d.getAttribute("nonce")},u):C(d.textContent.replace(Ge,""),d,u))}return e}function ze(e,t,n){for(var r,o=t?x.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||x.cleanData(je(r)),r.parentNode&&(n&&ve(r)&&De(je(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),c=ve(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=je(s),r=0,o=(i=je(e)).length;r<o;r++)Be(i[r],a[r]);if(t)if(n)for(i=i||je(e),a=a||je(s),r=0,o=i.length;r<o;r++)We(i[r],a[r]);else We(e,s);return(a=je(s,"script")).length>0&&De(a,!c&&je(e,"script")),s},cleanData:function(e){for(var t,n,r,o=x.event.special,i=0;void 0!==(n=e[i]);i++)if(ie(n)){if(t=n[se.expando]){if(t.events)for(r in t.events)o[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle);n[se.expando]=void 0}n[ce.expando]&&(n[ce.expando]=void 0)}}}),x.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return ee(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Je(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ue(this,e).appendChild(e)})},prepend:function(){return Je(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ue(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Je(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Je(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(je(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return ee(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!Pe[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(je(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Je(this,arguments,function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(je(this)),n&&n.replaceChild(t,this))},e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],o=x(e),i=o.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),x(o[a])[t](n),d.apply(r,n.get());return this.pushStack(r)}});var $e=new RegExp("^("+pe+")(?!px)[a-z%]+$","i"),Xe=/^--/,Ke=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ye=function(e,t,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=i[o];return r},Qe=new RegExp(he.join("|"),"i");function Ze(e,t,n){var r,o,i,a,s=Xe.test(t),c=e.style;return(n=n||Ke(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(A,"$1")||void 0),""!==a||ve(e)||(a=x.style(e,t)),!v.pixelBoxStyles()&&$e.test(a)&&Qe.test(t)&&(r=c.width,o=c.minWidth,i=c.maxWidth,c.minWidth=c.maxWidth=c.width=a,a=n.width,c.width=r,c.minWidth=o,c.maxWidth=i)),void 0!==a?a+"":a}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(d).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),o=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),me.removeChild(d),u=null}}function t(e){return Math.round(parseFloat(e))}var n,o,i,a,s,c,d=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(v,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,o;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),o=r.getComputedStyle(t),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),s}}))}();var tt=["Webkit","Moz","ms"],nt=b.createElement("div").style,rt={};function ot(e){return x.cssProps[e]||rt[e]||(e in nt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ct(e,t,n){var r=fe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function dt(e,t,n,r,o,i){var a="width"===t?1:0,s=0,c=0,d=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(d+=x.css(e,n+he[a],!0,o)),r?("content"===n&&(c-=x.css(e,"padding"+he[a],!0,o)),"margin"!==n&&(c-=x.css(e,"border"+he[a]+"Width",!0,o))):(c+=x.css(e,"padding"+he[a],!0,o),"padding"!==n?c+=x.css(e,"border"+he[a]+"Width",!0,o):s+=x.css(e,"border"+he[a]+"Width",!0,o));return!r&&i>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-c-s-.5))||0),c+d}function ut(e,t,n){var r=Ke(e),o=(!v.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,r),i=o,a=Ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&o||!v.reliableTrDimensions()&&R(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===x.css(e,"boxSizing",!1,r),(i=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+dt(e,t,n||(o?"border":"content"),i,r,a)+"px"}function lt(e,t,n,r,o){return new lt.prototype.init(e,t,n,r,o)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=oe(t),c=Xe.test(t),d=e.style;if(c||(t=ot(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:d[t];"string"==(i=typeof n)&&(o=fe.exec(n))&&o[1]&&(n=be(e,t,o),i="number"),null!=n&&n==n&&("number"!==i||c||(n+=o&&o[3]||(x.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(c?d.setProperty(t,n):d[t]=n))}},css:function(e,t,n,r){var o,i,a,s=oe(t);return Xe.test(t)||(t=ot(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Ze(e,t,r)),"normal"===o&&t in st&&(o=st[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!it.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Ye(e,at,function(){return ut(e,t,r)})},set:function(e,n,r){var o,i=Ke(e),a=!v.scrollboxSize()&&"absolute"===i.position,s=(a||r)&&"border-box"===x.css(e,"boxSizing",!1,i),c=r?dt(e,t,r,s,i):0;return s&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-dt(e,t,"border",!1,i)-.5)),c&&(o=fe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),ct(0,n,c)}}}),x.cssHooks.marginLeft=et(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+he[r]+t]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(x.cssHooks[e+t].set=ct)}),x.fn.extend({css:function(e,t){return ee(this,function(e,t,n){var r,o,i={},a=0;if(Array.isArray(t)){for(r=Ke(e),o=t.length;a<o;a++)i[t[a]]=x.css(e,t[a],!1,r);return i}return void 0!==n?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)}}),x.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(x.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[ot(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=lt.prototype.init,x.fx.step={};var pt,ft,ht=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function vt(){ft&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(vt):r.setTimeout(vt,x.fx.interval),x.fx.tick())}function gt(){return r.setTimeout(function(){pt=void 0}),pt=Date.now()}function yt(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=he[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function bt(e,t,n){for(var r,o=(St.tweeners[t]||[]).concat(St.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function St(e,t,n){var r,o,i=0,a=St.prefilters.length,s=x.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=pt||gt(),n=Math.max(0,d.startTime+d.duration-t),r=1-(n/d.duration||0),i=0,a=d.tweens.length;i<a;i++)d.tweens[i].run(r);return s.notifyWith(e,[d,r,n]),r<1&&a?n:(a||s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:pt||gt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(r),r},stop:function(t){var n=0,r=t?d.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)d.tweens[n].run(1);return t?(s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d,t])):s.rejectWith(e,[d,t]),this}}),u=d.props;for(function(e,t){var n,r,o,i,a;for(n in e)if(o=t[r=oe(n)],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=o);else t[r]=o}(u,d.opts.specialEasing);i<a;i++)if(r=St.prefilters[i].call(d,e,u,d.opts))return g(r.stop)&&(x._queueHooks(d.elem,d.opts.queue).stop=r.stop.bind(r)),r;return x.map(u,bt,d),g(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),x.fx.timer(x.extend(c,{elem:e,anim:d,queue:d.opts.queue})),d}x.Animation=x.extend(St,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(z);for(var n,r=0,o=e.length;r<o;r++)n=e[r],St.tweeners[n]=St.tweeners[n]||[],St.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,i,a,s,c,d,u,l="width"in t||"height"in t,p=this,f={},h=e.style,m=e.nodeType&&ye(e),v=se.get(e,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[r],ht.test(o)){if(delete t[r],i=i||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!v||void 0===v[r])continue;m=!0}f[r]=v&&v[r]||x.style(e,r)}if((c=!x.isEmptyObject(t))||!x.isEmptyObject(f))for(r in l&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(d=v&&v.display)&&(d=se.get(e,"display")),"none"===(u=x.css(e,"display"))&&(d?u=d:(we([e],!0),d=e.style.display||d,u=x.css(e,"display"),we([e]))),("inline"===u||"inline-block"===u&&null!=d)&&"none"===x.css(e,"float")&&(c||(p.done(function(){h.display=d}),null==d&&(u=h.display,d="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,f)c||(v?"hidden"in v&&(m=v.hidden):v=se.access(e,"fxshow",{display:d}),i&&(v.hidden=!m),m&&we([e],!0),p.done(function(){for(r in m||we([e]),se.remove(e,"fxshow"),f)x.style(e,r,f[r])})),c=bt(m?v[r]:0,r,p),r in v||(v[r]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?St.prefilters.unshift(e):St.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=x.isEmptyObject(e),i=x.speed(t,n,r),a=function(){var t=St(this,x.extend({},e),i);(o||se.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=x.timers,a=se.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&mt.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=se.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(yt(t,!0),e,r,o)}}),x.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(pt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),pt=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ft||(ft=!0,vt())},x.fx.stop=function(){ft=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,t){return e=x.fx&&x.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var o=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(o)}})},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var Ct,wt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return ee(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?x.prop(e,t,n):(1===i&&x.isXMLDoc(e)||(o=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?Ct:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&R(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(z);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),Ct={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=wt[t]||x.find.attr;wt[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=wt[a],wt[a]=o,o=null!=n(e,t,r)?a:null,wt[a]=i),o}});var Tt=/^(?:input|select|textarea|button)$/i,kt=/^(?:a|area)$/i;function xt(e){return(e.match(z)||[]).join(" ")}function Et(e){return e.getAttribute&&e.getAttribute("class")||""}function Rt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(z)||[]}x.fn.extend({prop:function(e,t){return ee(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&x.isXMLDoc(e)||(t=x.propFix[t]||t,o=x.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,n,r,o,i,a;return g(e)?this.each(function(t){x(this).addClass(e.call(this,t,Et(this)))}):(t=Rt(e)).length?this.each(function(){if(r=Et(this),n=1===this.nodeType&&" "+xt(r)+" "){for(i=0;i<t.length;i++)o=t[i],n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=xt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(e){var t,n,r,o,i,a;return g(e)?this.each(function(t){x(this).removeClass(e.call(this,t,Et(this)))}):arguments.length?(t=Rt(e)).length?this.each(function(){if(r=Et(this),n=1===this.nodeType&&" "+xt(r)+" "){for(i=0;i<t.length;i++)for(o=t[i];n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=xt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,r,o,i,a=typeof e,s="string"===a||Array.isArray(e);return g(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,Et(this),t),t)}):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Rt(e),this.each(function(){if(s)for(i=x(this),o=0;o<n.length;o++)r=n[o],i.hasClass(r)?i.removeClass(r):i.addClass(r);else void 0!==e&&"boolean"!==a||((r=Et(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+xt(Et(n))+" ").indexOf(t)>-1)return!0;return!1}});var Pt=/\r/g;x.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=g(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,x(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(Pt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:xt(x.text(e))}},select:{get:function(e){var t,n,r,o=e.options,i=e.selectedIndex,a="select-one"===e.type,s=a?null:[],c=a?i+1:o.length;for(r=i<0?c:a?i:0;r<c;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!R(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,i=x.makeArray(t),a=o.length;a--;)((r=o[a]).selected=x.inArray(x.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},v.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var jt=r.location,Dt={guid:Date.now()},It=/\?/;x.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||x.error("Invalid XML: "+(n?x.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var At=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,t,n,o){var i,a,s,c,d,u,l,p,h=[n||b],m=f.call(e,"type")?e.type:e,v=f.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!At.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),d=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:x.makeArray(t,[e]),l=x.event.special[m]||{},o||!l.trigger||!1!==l.trigger.apply(n,t))){if(!o&&!l.noBubble&&!y(n)){for(c=l.delegateType||m,At.test(c+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(n.ownerDocument||b)&&h.push(s.defaultView||s.parentWindow||r)}for(i=0;(a=h[i++])&&!e.isPropagationStopped();)p=a,e.type=i>1?c:l.bindType||m,(u=(se.get(a,"events")||Object.create(null))[e.type]&&se.get(a,"handle"))&&u.apply(a,t),(u=d&&a[d])&&u.apply&&ie(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(h.pop(),t)||!ie(n)||d&&g(n[m])&&!y(n)&&((s=n[d])&&(n[d]=null),x.event.triggered=m,e.isPropagationStopped()&&p.addEventListener(m,_t),n[m](),e.isPropagationStopped()&&p.removeEventListener(m,_t),x.event.triggered=void 0,s&&(n[d]=s)),e.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}});var Ot=/\[\]$/,Mt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,r){var o;if(Array.isArray(t))x.each(t,function(t,o){n||Ot.test(e)?r(e,o):Ft(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==w(t))r(e,t);else for(o in t)Ft(e+"["+o+"]",t[o],n,r)}x.param=function(e,t){var n,r=[],o=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(n in e)Ft(n,e[n],t,o);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&Lt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!xe.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}});var qt=/%20/g,Gt=/#.*$/,Ut=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vt=/^(?:GET|HEAD)$/,Wt=/^\/\//,Bt={},Jt={},zt="*/".concat("*"),$t=b.createElement("a");function Xt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(z)||[];if(g(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Kt(e,t,n,r){var o={},i=e===Jt;function a(s){var c;return o[s]=!0,x.each(e[s]||[],function(e,s){var d=s(t,n,r);return"string"!=typeof d||i||o[d]?i?!(c=d):void 0:(t.dataTypes.unshift(d),a(d),!1)}),c}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Yt(e,t){var n,r,o=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}$t.href=jt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(jt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,x.ajaxSettings),t):Yt(x.ajaxSettings,e)},ajaxPrefilter:Xt(Bt),ajaxTransport:Xt(Jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,i,a,s,c,d,u,l,p,f=x.ajaxSetup({},t),h=f.context||f,m=f.context&&(h.nodeType||h.jquery)?x(h):x.event,v=x.Deferred(),g=x.Callbacks("once memory"),y=f.statusCode||{},S={},C={},w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(d){if(!a)for(a={};t=Ht.exec(i);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?i:null},setRequestHeader:function(e,t){return null==d&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,S[e]=t),this},overrideMimeType:function(e){return null==d&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)T.always(e[T.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),k(0,t),this}};if(v.promise(T),f.url=((e||f.url||jt.href)+"").replace(Wt,jt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(z)||[""],null==f.crossDomain){c=b.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=$t.protocol+"//"+$t.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=x.param(f.data,f.traditional)),Kt(Bt,f,t,T),d)return T;for(l in(u=x.event&&f.global)&&0===x.active++&&x.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Vt.test(f.type),o=f.url.replace(Gt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(qt,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(It.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Ut,"$1"),p=(It.test(o)?"&":"?")+"_="+Dt.guid+++p),f.url=o+p),f.ifModified&&(x.lastModified[o]&&T.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&T.setRequestHeader("If-None-Match",x.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+zt+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(l,f.headers[l]);if(f.beforeSend&&(!1===f.beforeSend.call(h,T,f)||d))return T.abort();if(w="abort",g.add(f.complete),T.done(f.success),T.fail(f.error),n=Kt(Jt,f,t,T)){if(T.readyState=1,u&&m.trigger("ajaxSend",[T,f]),d)return T;f.async&&f.timeout>0&&(s=r.setTimeout(function(){T.abort("timeout")},f.timeout));try{d=!1,n.send(S,k)}catch(e){if(d)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,a,c){var l,p,b,S,C,w=t;d||(d=!0,s&&r.clearTimeout(s),n=void 0,i=c||"",T.readyState=e>0?4:0,l=e>=200&&e<300||304===e,a&&(S=function(e,t,n){for(var r,o,i,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){c.unshift(o);break}if(c[0]in n)i=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==c[0]&&c.unshift(i),n[i]}(f,T,a)),!l&&x.inArray("script",f.dataTypes)>-1&&x.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),S=function(e,t,n,r){var o,i,a,s,c,d={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=u.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(a=d[c+" "+i]||d["* "+i]))for(o in d)if((s=o.split(" "))[1]===i&&(a=d[c+" "+s[0]]||d["* "+s[0]])){!0===a?a=d[o]:!0!==d[o]&&(i=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}(f,S,T,l),l?(f.ifModified&&((C=T.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=C),(C=T.getResponseHeader("etag"))&&(x.etag[o]=C)),204===e||"HEAD"===f.type?w="nocontent":304===e?w="notmodified":(w=S.state,p=S.data,l=!(b=S.error))):(b=w,!e&&w||(w="error",e<0&&(e=0))),T.status=e,T.statusText=(t||w)+"",l?v.resolveWith(h,[p,w,T]):v.rejectWith(h,[T,w,b]),T.statusCode(y),y=void 0,u&&m.trigger(l?"ajaxSuccess":"ajaxError",[T,f,l?p:b]),g.fireWith(h,[T,w]),u&&(m.trigger("ajaxComplete",[T,f]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,o){return g(n)&&(o=o||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:o,data:n,success:r},x.isPlainObject(e)&&e))}}),x.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Zt=x.ajaxSettings.xhr();v.cors=!!Zt&&"withCredentials"in Zt,v.ajax=Zt=!!Zt,x.ajaxTransport(function(e){var t,n;if(v.cors||Zt&&!e.crossDomain)return{send:function(o,i){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}});var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||x.expando+"_"+Dt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(e,t,n){var o,i,a,s=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(nn,"$1"+o):!1!==e.jsonp&&(e.url+=(It.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||x.error(o+" was not called"),a[0]},e.dataTypes[0]="json",i=r[o],r[o]=function(){a=arguments},n.always(function(){void 0===i?x(r).removeProp(o):r[o]=i,e[o]&&(e.jsonpCallback=t.jsonpCallback,tn.push(o)),a&&g(i)&&i(a[0]),a=i=void 0}),"script"}),v.createHTMLDocument=((en=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),i=!n&&[],(o=G.exec(e))?[t.createElement(o[1])]:(o=Ae([e],t,i),i&&i.length&&x(i).remove(),x.merge([],o.childNodes)));var r,o,i},x.fn.load=function(e,t,n){var r,o,i,a=this,s=e.indexOf(" ");return s>-1&&(r=xt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&x.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(e,t,n){var r,o,i,a,s,c,d=x.css(e,"position"),u=x(e),l={};"static"===d&&(e.style.position="relative"),s=u.offset(),i=x.css(e,"top"),c=x.css(e,"left"),("absolute"===d||"fixed"===d)&&(i+c).indexOf("auto")>-1?(a=(r=u.position()).top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(c)||0),g(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(l.top=t.top-s.top+a),null!=t.left&&(l.left=t.left-s.left+o),"using"in t?t.using.call(e,l):u.css(l)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),o.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-x.css(r,"marginTop",!0),left:t.left-o.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||me})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return ee(this,function(e,r,o){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o},e,r,arguments.length)}}),x.each(["top","left"],function(e,t){x.cssHooks[t]=et(v.pixelPosition,function(e,n){if(n)return n=Ze(e,t),$e.test(n)?x(e).position()[t]+"px":n})}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return ee(this,function(t,n,o){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?x.css(t,n,s):x.style(t,n,o,s)},t,a?o:void 0,a)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),o=function(){return e.apply(t||this,r.concat(s.call(arguments)))},o.guid=e.guid=e.guid||x.guid++,o},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=R,x.isFunction=g,x.isWindow=y,x.camelCase=oe,x.type=w,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return x}.apply(t,[]))||(e.exports=n);var on=r.jQuery,an=r.$;return x.noConflict=function(e){return r.$===x&&(r.$=an),e&&r.jQuery===x&&(r.jQuery=on),x},void 0===o&&(r.jQuery=r.$=x),x})},963(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},t.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter(function(e){return 0===e.indexOf(n)})},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],o=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o],a=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach(function(e){n.headerExtensions.push(t.parseExtmap(e))}),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach(function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)});var o=0;return n.codecs.forEach(function(e){e.maxptime>o&&(o=e.maxptime)}),o>0&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach(function(e){r+=t.writeExtmap(e)}),r},t.parseRtpEncodingParameters=function(e){var n,r=[],o=t.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,d=t.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});d.length>0&&d[0].length>1&&d[0][0]===c&&(n=d[0][1]),o.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}}),0===r.length&&c&&r.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=u})),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var o=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=0===o.length;var i=t.matchPrefix(e,"a=rtcp-mux");return n.mux=i.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var o=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return o.length>0?{stream:(n=o[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),o=t.matchPrefix(e,"a=max-message-size:");o.length>0&&(n=parseInt(o[0].substr(19),10)),isNaN(n)&&(n=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var o=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,o){var i=t.writeRtpDescription(e.kind,n);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,n){for(var r=t.splitLines(e),o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0;var o={};return(()=>{"use strict";r.r(o),r.d(o,{Janus:()=>Pe,JanusComponent:()=>Ne,JanusPlayer:()=>Ge,JanusPublisher:()=>Ve,JanusStreamer:()=>Qe,JanusSubscriber:()=>ze,JanusVideoRoom:()=>Le});var e={};r.r(e),r.d(e,{fixNegotiationNeeded:()=>A,shimAddTrackRemoveTrack:()=>D,shimAddTrackRemoveTrackWithNative:()=>j,shimGetDisplayMedia:()=>T,shimGetSendersWithDtmf:()=>E,shimGetStats:()=>R,shimGetUserMedia:()=>w,shimMediaStream:()=>k,shimOnTrack:()=>x,shimPeerConnection:()=>I,shimSenderReceiverGetStats:()=>P});var t={};r.r(t),r.d(t,{shimGetDisplayMedia:()=>N,shimGetUserMedia:()=>M,shimPeerConnection:()=>L,shimReplaceTrack:()=>F});var n={};r.r(n),r.d(n,{shimAddTransceiver:()=>z,shimCreateAnswer:()=>K,shimCreateOffer:()=>X,shimGetDisplayMedia:()=>G,shimGetParameters:()=>$,shimGetUserMedia:()=>q,shimOnTrack:()=>U,shimPeerConnection:()=>H,shimRTCDataChannel:()=>J,shimReceiverGetStats:()=>W,shimRemoveStream:()=>B,shimSenderGetStats:()=>V});var i={};r.r(i),r.d(i,{shimAudioContext:()=>ie,shimCallbacksAPI:()=>Z,shimConstraints:()=>te,shimCreateOfferLegacy:()=>oe,shimGetUserMedia:()=>ee,shimLocalStreamsAPI:()=>Y,shimRTCIceServerUrls:()=>ne,shimRemoteStreamsAPI:()=>Q,shimTrackEventTransceiver:()=>re});var a={};r.r(a),r.d(a,{removeExtmapAllowMixed:()=>pe,shimAddIceCandidateNullOrEmpty:()=>fe,shimConnectionState:()=>le,shimMaxMessageSize:()=>de,shimRTCIceCandidate:()=>ce,shimSendThrowTypeError:()=>ue}),r(216);var s=r(692),c=r.n(s);let d=!0,u=!0;function l(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function p(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function f(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(d=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function m(){if("object"==typeof window){if(d)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function v(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return g(e)?Object.keys(e).reduce(function(t,n){const r=g(e[n]),o=r?y(e[n]):e[n],i=r&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[n]:o})},{}):e}function b(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?b(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(t=>{b(e,e.get(t),n)})}))}function S(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&b(e,n,o)})}),o}const C=m;function w(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),e={},e[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const a=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?t=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let a=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),C("chrome: "+JSON.stringify(e)),o(e)})}e.video=r(e.video)}return C("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){o(e,e=>{n.webkitGetUserMedia(e,t,e=>{r&&r(i(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return o(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(i(e))))}}}function T(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function k(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function x(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else p(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function E(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function R(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},i=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(i(o(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(i(o(t)))},n])}).then(n,r)}}function P(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>S(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),p(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>S(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function j(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),o.apply(this,arguments)}}function D(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return j(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>i(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function I(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]})}function A(e,t){p(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}var _=r(677),O=r.n(_);function M(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function N(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function L(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=O()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e){let t=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let n=e.urls||e.url;e.url&&!e.urls&&v("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof n;return r&&(n=[n]),n=n.filter(e=>{if(0===e.indexOf("stun:"))return!1;const n=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return n&&!t?(t=!0,!0):n&&!t}),delete e.url,e.urls=r?n[0]:n,!!n.length}})}(e.iceServers,t.version),m("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function F(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function q(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){v("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function G(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function U(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function H(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!o)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,i)}}function V(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function W(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),p(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function B(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){v("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function J(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function z(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function $(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function X(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function K(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Y(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function Z(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};let s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function ee(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(te(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function te(e){return e&&void 0!==e.video?Object.assign({},e,{video:y(e.video)}):e}function ne(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(v("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function re(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function ie(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ae=r(963),se=r.n(ae);function ce(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=se().parseCandidate(e.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,p(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function de(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=se().splitSections(e.sdp);return t.shift(),t.some(e=>{const t=se().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const o=se().matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let o;o=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const i={};Object.defineProperty(i,"maxMessageSize",{get:()=>o}),this._sctp=i}return n.apply(this,arguments)}}function ue(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},p(e,"datachannel",e=>(t(e.channel,e.target),e))}function le(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function pe(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function fe(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const he=function({window:r}={},o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const s=m,c=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=l(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=l(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(r),d={browserDetails:c,commonShim:a,extractVersion:l,disableLog:f,disableWarnings:h};switch(c.browser){case"chrome":if(!e||!I||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),d;if(null===c.version)return s("Chrome shim can not determine version, not shimming."),d;s("adapter.js shimming chrome."),d.browserShim=e,fe(r,c),w(r,c),k(r),I(r,c),x(r),D(r,c),E(r),R(r),P(r),A(r,c),ce(r),le(r),de(r,c),ue(r),pe(r,c);break;case"firefox":if(!n||!H||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),d;s("adapter.js shimming firefox."),d.browserShim=n,fe(r,c),q(r,c),H(r,c),U(r),B(r),V(r),W(r),J(r),z(r),$(r),X(r),K(r),ce(r),le(r),de(r,c),ue(r);break;case"edge":if(!t||!L||!o.shimEdge)return s("MS edge shim is not included in this adapter release."),d;s("adapter.js shimming edge."),d.browserShim=t,M(r),N(r),L(r,c),F(r),de(r,c),ue(r);break;case"safari":if(!i||!o.shimSafari)return s("Safari shim is not included in this adapter release."),d;s("adapter.js shimming safari."),d.browserShim=i,fe(r,c),ne(r),oe(r),Z(r),Y(r),Q(r),re(r),ee(r),ie(r),ce(r),de(r,c),ue(r),pe(r,c);break;default:s("Unsupported browser!")}return d}({window:"undefined"==typeof window?void 0:window}),me=he;function ve(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(xe(e)+" is not iterable")}function ge(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,d=Object.create(c.prototype);return ye(d,"_invoke",function(n,r,o){var i,s,c,d=0,u=o||[],l=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,p.n=n,a}};function f(n,r){for(s=n,c=r,t=0;!l&&d&&!o&&t<u.length;t++){var o,i=u[t],f=p.p,h=i[2];n>3?(o=h===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=n<2&&f<i[1])?(s=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,s=0))}if(o||n>1)return a;throw l=!0,r}return function(o,u,h){if(d>1)throw TypeError("Generator is already running");for(l&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!l;){i||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(d=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(t){i=e,s=1,c=t}finally{d=1}}return{value:t,done:l}}}(n,o,i),!0),d}var a={};function s(){}function c(){}function d(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ye(t={},r,function(){return this}),t),l=d.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,ye(e,o,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=d,ye(l,"constructor",d),ye(d,"constructor",c),c.displayName="GeneratorFunction",ye(d,o,"GeneratorFunction"),ye(l),ye(l,o,"Generator"),ye(l,r,function(){return this}),ye(l,"toString",function(){return"[object Generator]"}),(ge=function(){return{w:i,m:p}})()}function ye(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ye=function(e,t,n,r){function i(t,n){ye(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},ye(e,t,n,r)}function be(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Se(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){be(i,r,o,a,s,"next",e)}function s(e){be(i,r,o,a,s,"throw",e)}a(void 0)})}}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||Te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Te(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Te(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}window.RTCRtpTransceiver,Re.sessions=new Map,Re.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||Re.extension.isInstalled()}return!0};var Ee={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout(function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)},1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var r=new Error("NavigatorUserMediaError");r.name="You cancelled the request for permission, giving up...",n(r)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))})}};function Re(e){if((e=e||{}).success="function"==typeof e.success?e.success:Re.noop,e.error="function"==typeof e.error?e.error:Re.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:Re.noop,!Re.initDone)return e.error("Library not initialized"),{};if(!Re.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(Re.log("Library initialized: "+Re.initDone),!e.server)return e.error("Invalid server url"),{};var t=!1,n=null,r={},o=null,i=null,a=0,s=e.server;Re.isArray(s)?(Re.log("Multiple servers provided ("+s.length+"), will use the first that works"),s=null,i=e.server,Re.debug(i)):0===s.indexOf("ws")?(t=!0,Re.log("Using WebSockets to contact Janus: "+s)):(t=!1,Re.log("Using REST API to contact Janus: "+s));var c=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],d=e.iceTransportPolicy,u=e.bundlePolicy,l=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(l=!0===e.withCredentials);var p=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(p=e.max_poll_events),p<1&&(p=1);var f=null;void 0!==e.token&&null!==e.token&&(f=e.token);var h=null;void 0!==e.apisecret&&null!==e.apisecret&&(h=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var m=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(m=e.keepAlivePeriod),isNaN(m)&&(m=25e3);var v=6e4;function g(e){var t={high:9e5,medium:3e5,low:1e5};return null!=e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(v=e.longPollTimeout),isNaN(v)&&(v=6e4);var y=!1,b=null,S=new Map,C=this,w=0,T=new Map;function k(){if(null!=b)if(Re.debug("Long poll..."),y){var t=s+"/"+b+"?rid="+(new Date).getTime();p&&(t=t+"&maxev="+p),f&&(t=t+"&token="+encodeURIComponent(f)),h&&(t=t+"&apisecret="+encodeURIComponent(h)),Re.httpAPICall(t,{verb:"GET",withCredentials:l,success:x,timeout:v,error:function(t,n){if(Re.error(t+":",n),++w>3)return y=!1,void e.error("Lost connection to the server (is it down?)");k()}})}else Re.warn("Is the server down? (connected=false)")}function x(e,r){if(w=0,t||null==b||!0===r||k(),t||!Re.isArray(e))if("keepalive"!==e.janus)if("server_info"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){var o=e.sender;if(!o)return void Re.warn("Missing sender...");var i=S.get(o);if(!i)return void Re.debug("This handle is not attached to this session");var a=e.candidate;Re.debug("Got a trickled candidate on session "+b),Re.debug(a);var s=i.webrtcStuff;s.pc&&s.remoteSdp?(Re.debug("Adding remote candidate:",a),a&&!0!==a.completed?s.pc.addIceCandidate(a):s.pc.addIceCandidate(Re.endOfCandidates)):(Re.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),s.candidates||(s.candidates=[]),s.candidates.push(a),Re.debug(s.candidates))}else{if("webrtcup"===e.janus){Re.debug("Got a webrtcup event on session "+b),Re.debug(e);var c=e.sender;if(!c)return void Re.warn("Missing sender...");var d=S.get(c);return d?void d.webrtcState(!0):void Re.debug("This handle is not attached to this session")}if("hangup"===e.janus){Re.debug("Got a hangup event on session "+b),Re.debug(e);var u=e.sender;if(!u)return void Re.warn("Missing sender...");var l=S.get(u);if(!l)return void Re.debug("This handle is not attached to this session");l.webrtcState(!1,e.reason),l.hangup()}else if("detached"===e.janus){Re.debug("Got a detached event on session "+b),Re.debug(e);var p=e.sender;if(!p)return void Re.warn("Missing sender...");var f=S.get(p);if(!f)return;f.ondetached(),f.detach()}else if("media"===e.janus){Re.debug("Got a media event on session "+b),Re.debug(e);var h=e.sender;if(!h)return void Re.warn("Missing sender...");var m=S.get(h);if(!m)return void Re.debug("This handle is not attached to this session");m.mediaState(e.type,e.receiving,e.mid)}else if("slowlink"===e.janus){Re.debug("Got a slowlink event on session "+b),Re.debug(e);var v=e.sender;if(!v)return void Re.warn("Missing sender...");var g=S.get(v);if(!g)return void Re.debug("This handle is not attached to this session");g.slowLink(e.uplink,e.lost,e.mid)}else{if("error"===e.janus){Re.error("Ooops: "+e.error.code+" "+e.error.reason),Re.debug(e);var y=e.transaction;if(y){var C=T.get(y);C&&C(e),T.delete(y)}return}if("event"===e.janus){Re.debug("Got a plugin event on session "+b),Re.debug(e);var E=e.sender;if(!E)return void Re.warn("Missing sender...");var R=e.plugindata;if(!R)return void Re.warn("Missing plugindata...");Re.debug("  -- Event is coming from "+E+" ("+R.plugin+")");var P=R.data;Re.debug(P);var j=S.get(E);if(!j)return void Re.warn("This handle is not attached to this session");var D=e.jsep;D&&(Re.debug("Handling SDP as well..."),Re.debug(D));var I=j.onmessage;I?(Re.debug("Notifying application..."),I(P,D)):Re.debug("No provided notification callback")}else{if("timeout"===e.janus)return Re.error("Timeout on session "+b),Re.debug(e),void(t&&n.close(3504,"Gateway timeout"));Re.warn("Unknown message/event  '"+e.janus+"' on session "+b),Re.debug(e)}}}else{Re.debug("Got a success on session "+b),Re.debug(e);var A=e.transaction;if(A){var _=T.get(A);_&&_(e),T.delete(A)}}else{Re.debug("Got an ack on session "+b),Re.debug(e);var O=e.transaction;if(O){var M=T.get(O);M&&M(e),T.delete(O)}}else{Re.debug("Got info on the Janus instance"),Re.debug(e);var N=e.transaction;if(N){var L=T.get(N);L&&L(e),T.delete(N)}}else Re.vdebug("Got a keepalive on session "+b);else for(var F=0;F<e.length;F++)x(e[F],!0)}function E(){if(s&&t&&y){o=setTimeout(E,m);var e={janus:"keepalive",session_id:b,transaction:Re.randomString(12)};f&&(e.token=f),h&&(e.apisecret=h),n.send(JSON.stringify(e))}}function R(c){var d=Re.randomString(12),u={janus:"create",transaction:d};if(c.reconnect&&(y=!1,u.janus="claim",u.session_id=b,n&&(n.onopen=null,n.onerror=null,n.onclose=null,o&&(clearTimeout(o),o=null))),f&&(u.token=f),h&&(u.apisecret=h),!s&&Re.isArray(i)&&(0===(s=i[a]).indexOf("ws")?(t=!0,Re.log("Server #"+(a+1)+": trying WebSockets to contact Janus ("+s+")")):(t=!1,Re.log("Server #"+(a+1)+": trying REST API to contact Janus ("+s+")"))),t)for(var p in n=Re.newWebSocket(s,"janus-protocol"),r={error:function(){if(Re.error("Error connecting to the Janus WebSockets server... "+s),Re.isArray(i)&&!c.reconnect)return++a===i.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout(function(){R(c)},200));c.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){T.set(d,function(e){if(Re.debug(e),"success"!==e.janus)return Re.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);o=setTimeout(E,m),y=!0,b=e.session_id?e.session_id:e.data.id,c.reconnect?Re.log("Claimed session: "+b):Re.log("Created session: "+b),Re.sessions.set(b,C),c.success()}),n.send(JSON.stringify(u))},message:function(e){x(JSON.parse(e.data))},close:function(){s&&y&&(y=!1,e.error("Lost connection to the server (is it down?)"))}})n.addEventListener(p,r[p]);else Re.httpAPICall(s,{verb:"POST",withCredentials:l,body:u,success:function(e){if(Re.debug(e),"success"!==e.janus)return Re.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);y=!0,b=e.session_id?e.session_id:e.data.id,c.reconnect?Re.log("Claimed session: "+b):Re.log("Created session: "+b),Re.sessions.set(b,C),k(),c.success()},error:function(e,t){if(Re.error(e+":",t),Re.isArray(i)&&!c.reconnect)return++a===i.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout(function(){R(c)},200));""===t?c.error(e+": Is the server down?"):t&&t.error?c.error(e+": "+t.error.message):c.error(e+": "+t)}})}function P(e,r){if((r=r||{}).success="function"==typeof r.success?r.success:Re.noop,r.error="function"==typeof r.error?r.error:Re.noop,!y)return Re.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");var o=S.get(e);if(!o||!o.webrtcStuff)return Re.warn("Invalid handle"),void r.error("Invalid handle");var i=r.message,a=r.jsep,c=Re.randomString(12),d={janus:"message",body:i,transaction:c};if(o.token&&(d.token=o.token),h&&(d.apisecret=h),a){d.jsep={type:a.type,sdp:a.sdp},a.e2ee&&(d.jsep.e2ee=!0),"hml"!==a.rid_order&&"lmh"!==a.rid_order||(d.jsep.rid_order=a.rid_order),a.force_relay&&(d.jsep.force_relay=!0);var u=null,p=o.webrtcStuff;if(p.pc){var f=p.pc.getTransceivers();if(f&&f.length>0)for(var m in f){var v=f[m];if(v&&v.sender&&v.sender.track&&"video"===v.sender.track.kind){var g=v.sender.getParameters();g&&g.encodings&&1===g.encodings.length&&g.encodings[0]&&g.encodings[0].scalabilityMode&&(u||(u=[]),u.push({mindex:parseInt(m),mid:v.mid,svc:g.encodings[0].scalabilityMode}))}}}u&&(d.jsep.svc=u)}if(Re.debug("Sending message to plugin (handle="+e+"):"),Re.debug(d),t)return d.session_id=b,d.handle_id=e,T.set(c,function(e){if(Re.debug("Message sent!"),Re.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return Re.warn("Request succeeded, but missing plugindata..."),void r.success();Re.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return Re.debug(n),void r.success(n)}"ack"===e.janus?r.success():e.error?(Re.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(Re.error("Unknown error"),r.error("Unknown error"))}),void n.send(JSON.stringify(d));Re.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:l,body:d,success:function(e){if(Re.debug("Message sent!"),Re.debug(e),"success"===e.janus){var t=e.plugindata;if(!t)return Re.warn("Request succeeded, but missing plugindata..."),void r.success();Re.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return Re.debug(n),void r.success(n)}"ack"===e.janus?r.success():e.error?(Re.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(Re.error("Unknown error"),r.error("Unknown error"))},error:function(e,t){Re.error(e+":",t),r.error(e+": "+t)}})}function j(e,r){if(y){var o=S.get(e);if(o&&o.webrtcStuff){var i={janus:"trickle",candidate:r,transaction:Re.randomString(12)};if(o.token&&(i.token=o.token),h&&(i.apisecret=h),Re.vdebug("Sending trickle candidate (handle="+e+"):"),Re.vdebug(i),t)return i.session_id=b,i.handle_id=e,void n.send(JSON.stringify(i));Re.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:l,body:i,success:function(e){Re.vdebug("Candidate sent!"),Re.vdebug(e),"ack"===e.janus||Re.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){Re.error(e+":",t)}})}else Re.warn("Invalid handle")}else Re.warn("Is the server down? (connected=false)")}function D(e,t,n,r,o){var i=S.get(e);if(i&&i.webrtcStuff){var a=i.webrtcStuff;if(a.pc){var s=function(e){Re.log("Received state change on data channel:",e);var t=e.target.label,n=e.target.protocol,r=a.dataChannel[t]?a.dataChannel[t].readyState:"null";if(Re.log("State change on <"+t+"> data channel: "+r),"open"===r){if(a.dataChannel[t].pending&&a.dataChannel[t].pending.length>0){Re.log("Sending pending messages on <"+t+">:",a.dataChannel[t].pending.length);var o,s=we(a.dataChannel[t].pending);try{for(s.s();!(o=s.n()).done;){var c=o.value;Re.log("Sending data on data channel <"+t+">"),Re.debug(c),a.dataChannel[t].send(c)}}catch(e){s.e(e)}finally{s.f()}a.dataChannel[t].pending=[]}i.ondataopen(t,n)}};if(r)a.dataChannel[t]=r;else{var c=a.dataChannelOptions;n&&(c.protocol=n),a.dataChannel[t]=a.pc.createDataChannel(t,c)}a.dataChannel[t].onmessage=function(e){Re.log("Received message on data channel:",e);var t=e.target.label;i.ondata(e.data,t)},a.dataChannel[t].onopen=s,a.dataChannel[t].onclose=s,a.dataChannel[t].onerror=function(e){Re.error("Got error on data channel:",e)},a.dataChannel[t].pending=[],o&&a.dataChannel[t].pending.push(o)}else Re.warn("Invalid PeerConnection")}else Re.warn("Invalid handle")}function I(e,t){(t=t||{}).success="function"==typeof t.success?t.success:Re.noop,t.error="function"==typeof t.error?t.error:Re.noop;var n=S.get(e);if(!n||!n.webrtcStuff)return Re.warn("Invalid handle"),void t.error("Invalid handle");var r=n.webrtcStuff,o=t.text||t.data;if(!o)return Re.warn("Invalid data"),void t.error("Invalid data");var i=t.label?t.label:Re.dataChanDefaultLabel;return r.dataChannel[i]?"open"!==r.dataChannel[i].readyState?(r.dataChannel[i].pending.push(o),void t.success()):(Re.log("Sending data on data channel <"+i+">"),Re.debug(o),r.dataChannel[i].send(o),void t.success()):(D(e,i,t.protocol,!1,o,t.protocol),void t.success())}function A(e,t){(t=t||{}).success="function"==typeof t.success?t.success:Re.noop,t.error="function"==typeof t.error?t.error:Re.noop;var n=S.get(e);if(!n||!n.webrtcStuff)return Re.warn("Invalid handle"),void t.error("Invalid handle");var r=n.webrtcStuff;if(!r.dtmfSender){if(r.pc){var o=r.pc.getSenders().find(function(e){return e.track&&"audio"===e.track.kind});if(!o)return Re.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");r.dtmfSender=o.dtmf,r.dtmfSender&&(Re.log("Created DTMF Sender"),r.dtmfSender.ontonechange=function(e){Re.debug("Sent DTMF tone: "+e.tone)})}if(!r.dtmfSender)return Re.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var i=t.dtmf;if(!i)return Re.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var a=i.tones;if(!a)return Re.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var s="number"==typeof i.duration?i.duration:500,c="number"==typeof i.gap?i.gap:50;Re.debug("Sending DTMF string "+a+" (duration "+s+"ms, gap "+c+"ms)"),r.dtmfSender.insertDTMF(a,s,c),t.success()}function _(e,r){(r=r||{}).success="function"==typeof r.success?r.success:Re.noop,r.error="function"==typeof r.error?r.error:Re.noop;var o=!0===r.noRequest;Re.log("Destroying handle "+e+" (only-locally="+o+")"),ee(e);var i=S.get(e);if(!i||i.detached)return S.delete(e),void r.success();if(i.detached=!0,o)return S.delete(e),void r.success();if(!y)return Re.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");var a={janus:"detach",transaction:Re.randomString(12)};if(i.token&&(a.token=i.token),h&&(a.apisecret=h),t)return a.session_id=b,a.handle_id=e,n.send(JSON.stringify(a)),S.delete(e),void r.success();Re.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:l,body:a,success:function(t){Re.log("Destroyed handle:"),Re.debug(t),"success"!==t.janus&&Re.error("Ooops: "+t.error.code+" "+t.error.reason),S.delete(e),r.success()},error:function(t,n){Re.error(t+":",n),S.delete(e),r.success()}})}function O(e,t){var n=S.get(e);if(!n||!n.webrtcStuff)throw Re.warn("Invalid handle"),"Invalid handle";var r=n.webrtcStuff;if(!r.pc){var o={iceServers:c,iceTransportPolicy:d,bundlePolicy:u,sdpSemantics:"unified-plan"},i=!1;if(t.tracks){var a,s=we(t.tracks);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l.transforms&&(l.transforms.sender||l.transforms.receiver)){i=!0;break}}}catch(e){s.e(e)}finally{s.f()}}t.externalEncryption&&(i=!0,r.externalEncryption=!0),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&i&&(r.insertableStreams=!0,o.forceEncodedAudioInsertableStreams=!0,o.forceEncodedVideoInsertableStreams=!0,o.encodedInsertableStreams=!0),Re.log("Creating PeerConnection"),r.pc=new RTCPeerConnection(o),Re.debug(r.pc),r.pc.getStats&&(r.volume={},r.bitrate.value="0 kbits/sec"),Re.log("Preparing local SDP and gathering candidates (trickle="+r.trickle+")"),r.pc.onconnectionstatechange=function(){r.pc&&n.connectionState(r.pc.connectionState)},r.pc.oniceconnectionstatechange=function(){r.pc&&n.iceState(r.pc.iceConnectionState)},r.pc.onicecandidate=function(n){if(!n.candidate||n.candidate.candidate&&n.candidate.candidate.indexOf("endOfCandidates")>0)Re.log("End of candidates."),r.iceDone=!0,!0===r.trickle?j(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:Re.noop,t.error="function"==typeof t.error?t.error:Re.noop;var n=S.get(e);if(n&&n.webrtcStuff){var r=n.webrtcStuff;Re.log("Sending offer/answer SDP..."),r.mySdp?(r.mySdp={type:r.pc.localDescription.type,sdp:r.pc.localDescription.sdp},!1===r.trickle&&(r.mySdp.trickle=!1),Re.debug(t),r.sdpSent=!0,t.success(r.mySdp)):Re.warn("Local SDP instance is invalid, not sending anything...")}else Re.warn("Invalid handle, not sending anything")}(e,t);else{var o={candidate:n.candidate.candidate,sdpMid:n.candidate.sdpMid,sdpMLineIndex:n.candidate.sdpMLineIndex};!0===r.trickle&&j(e,o)}},r.pc.ontrack=function(e){if(Re.log("Handling Remote Track",e),e.streams&&e.track){var t=e.transceiver?e.transceiver.mid:e.track.id;try{e.transceiver&&e.transceiver.mid&&e.track.id&&(n.mids||(n.mids={}),n.mids[e.track.id]=e.transceiver.mid),n.onremotetrack(e.track,t,!0,{reason:"created"})}catch(e){Re.error("Error calling onremotetrack",e)}if(!e.track.onended){var o=null;Re.log("Adding onended callback to track:",e.track),e.track.onended=function(t){Re.log("Remote track removed:",t),clearTimeout(o);var i=r.pc?r.pc.getTransceivers():null,a=i?i.find(function(e){return e.receiver.track===t.target}):null,s=a?a.mid:t.target.id;s===t.target.id&&n.mids&&n.mids[e.track.id]&&(s=n.mids[e.track.id]);try{n.onremotetrack(t.target,s,!1,{reason:"ended"})}catch(e){Re.error("Error calling onremotetrack on removal",e)}delete n.mids[e.track.id]},e.track.onmute=function(e){o||(o=setTimeout(function(){o=null},2520))},e.track.onunmute=function(e){null!=o&&(clearTimeout(o),o=null)}}}}}}function M(e,t,n){return N.apply(this,arguments)}function N(){return(N=Se(ge().m(function e(t,n,r){var o,i,a,s,c,d,u,l,p,f,h,m;return ge().w(function(e){for(;;)switch(e.p=e.n){case 0:if((r=r||{}).success="function"==typeof r.success?r.success:Re.noop,r.error="function"==typeof r.error?r.error:Z,o=r.jsep,!n||!o){e.n=1;break}return Re.error("Provided a JSEP to a createOffer"),r.error("Provided a JSEP to a createOffer"),e.a(2);case 1:if(n||o&&o.type&&o.sdp){e.n=2;break}return Re.error("A valid JSEP is required for createAnswer"),r.error("A valid JSEP is required for createAnswer"),e.a(2);case 2:if(!r.media||r.tracks){e.n=10;break}if(r.tracks=Re.mediaToTracks(r.media),!0!==r.simulcast&&!0!==r.simulcast2&&!r.svc){e.n=9;break}i=we(r.tracks),e.p=3,i.s();case 4:if((a=i.n()).done){e.n=6;break}if("video"!==(s=a.value).type){e.n=5;break}return!0===r.simulcast||!0===r.simulcast2?s.simulcast=!0:r.svc&&(s.svc=r.svc),e.a(3,6);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,h=e.v,i.e(h);case 8:return e.p=8,i.f(),e.f(8);case 9:Re.warn("Deprecated media object passed, use tracks instead. Automatically translated to:",r.tracks);case 10:if(!r.tracks||Array.isArray(r.tracks)){e.n=11;break}return Re.error("Tracks must be an array"),r.error("Tracks must be an array"),e.a(2);case 11:if((c=S.get(t))&&c.webrtcStuff){e.n=12;break}return Re.warn("Invalid handle"),r.error("Invalid handle"),e.a(2);case 12:if((d=c.webrtcStuff).trickle=te(r.trickle),e.p=13,O(t,r),!n){e.n=14;break}return e.n=14,W(t,r);case 14:if(o){e.n=16;break}return e.n=15,F(t,r);case 15:u=e.v,r.success(u),e.n=20;break;case 16:return e.n=17,d.pc.setRemoteDescription(o);case 17:if(Re.log("Remote description accepted!"),d.remoteSdp=o.sdp,d.candidates&&d.candidates.length>0){for(l=0;l<d.candidates.length;l++)p=d.candidates[l],Re.debug("Adding remote candidate:",p),p&&!0!==p.completed?d.pc.addIceCandidate(p):d.pc.addIceCandidate(Re.endOfCandidates);d.candidates=[]}return e.n=18,W(t,r);case 18:return e.n=19,G(t,r);case 19:f=e.v,r.success(f);case 20:e.n=22;break;case 21:e.p=21,m=e.v,Re.error(m),r.error(m);case 22:return e.a(2)}},e,null,[[13,21],[3,7,8,9]])}))).apply(this,arguments)}function L(e,t){(t=t||{}).success="function"==typeof t.success?t.success:Re.noop,t.error="function"==typeof t.error?t.error:Z,t.customizeSdp="function"==typeof t.customizeSdp?t.customizeSdp:Re.noop;var n=t.jsep,r=S.get(e);if(!r||!r.webrtcStuff)return Re.warn("Invalid handle"),void t.error("Invalid handle");var o=r.webrtcStuff;if(n){if(!o.pc)return Re.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");t.customizeSdp(n),o.pc.setRemoteDescription(n).then(function(){if(Re.log("Remote description accepted!"),o.remoteSdp=n.sdp,o.candidates&&o.candidates.length>0){for(var e=0;e<o.candidates.length;e++){var r=o.candidates[e];Re.debug("Adding remote candidate:",r),r&&!0!==r.completed?o.pc.addIceCandidate(r):o.pc.addIceCandidate(Re.endOfCandidates)}o.candidates=[]}t.success()},t.error)}else t.error("Invalid JSEP")}function F(e,t){return q.apply(this,arguments)}function q(){return(q=Se(ge().m(function e(t,n){var r,o,i,a,s;return ge().w(function(e){for(;;)switch(e.n){case 0:if((n=n||{}).customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:Re.noop,(r=S.get(t))&&r.webrtcStuff){e.n=1;break}throw Re.warn("Invalid handle"),"Invalid handle";case 1:return o=r.webrtcStuff,Re.log("Creating offer (iceDone="+o.iceDone+")"),i={},!0===n.iceRestart&&(i.iceRestart=!0),Re.debug(i),e.n=2,o.pc.createOffer(i);case 2:return a=e.v,Re.debug(a),s={type:"offer",sdp:a.sdp},n.customizeSdp(s),a.sdp=s.sdp,Re.log("Setting local description"),o.mySdp={type:"offer",sdp:a.sdp},e.n=3,o.pc.setLocalDescription(a);case 3:if(o.mediaConstraints=i,o.iceDone||o.trickle){e.n=4;break}return Re.log("Waiting for all candidates..."),e.a(2,null);case 4:return(o.insertableStreams||o.externalEncryption)&&(a.e2ee=!0),e.a(2,a)}},e)}))).apply(this,arguments)}function G(e,t){return U.apply(this,arguments)}function U(){return(U=Se(ge().m(function e(t,n){var r,o,i,a;return ge().w(function(e){for(;;)switch(e.n){case 0:if((n=n||{}).customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:Re.noop,(r=S.get(t))&&r.webrtcStuff){e.n=1;break}throw Re.warn("Invalid handle"),"Invalid handle";case 1:return o=r.webrtcStuff,Re.log("Creating answer (iceDone="+o.iceDone+")"),e.n=2,o.pc.createAnswer();case 2:return i=e.v,Re.debug(i),a={type:"answer",sdp:i.sdp},n.customizeSdp(a),i.sdp=a.sdp,Re.log("Setting local description"),o.mySdp={type:"answer",sdp:i.sdp},e.n=3,o.pc.setLocalDescription(i);case 3:if(o.iceDone||o.trickle){e.n=4;break}return Re.log("Waiting for all candidates..."),e.a(2,null);case 4:return(o.insertableStreams||o.externalEncryption)&&(i.e2ee=!0),e.a(2,i)}},e)}))).apply(this,arguments)}function H(e,t){return V.apply(this,arguments)}function V(){return(V=Se(ge().m(function e(t,n){var r,o,i,a;return ge().w(function(e){for(;;)switch(e.p=e.n){case 0:if((n=n||{}).success="function"==typeof n.success?n.success:Re.noop,n.error="function"==typeof n.error?n.error:Re.noop,!n.tracks||Array.isArray(n.tracks)){e.n=1;break}return Re.error("Tracks must be an array"),n.error("Tracks must be an array"),e.a(2);case 1:r=we(n.tracks);try{for(r.s();!(o=r.n()).done;)((i=o.value).add||!i.replace&&!i.remove)&&(i.replace=!0)}catch(e){r.e(e)}finally{r.f()}return e.p=2,e.n=3,W(t,n);case 3:n.success(),e.n=5;break;case 4:e.p=4,a=e.v,Re.error(a),n.error(a);case 5:return e.a(2)}},e,null,[[2,4]])}))).apply(this,arguments)}function W(e,t){return B.apply(this,arguments)}function B(){return(B=Se(ge().m(function e(t,n){var r,o,i,a,s,c,d,u,l,p,f,h,m,v,y,b,C,w,T,k;return ge().w(function(e){for(;;)switch(e.p=e.n){case 0:if((r=S.get(t))&&r.webrtcStuff){e.n=1;break}throw Re.warn("Invalid handle, not sending anything"),"Invalid handle";case 1:if((o=r.webrtcStuff).pc){e.n=2;break}throw Re.warn("Invalid PeerConnection"),"Invalid PeerConnection";case 2:if((i=n.tracks)&&Array.isArray(i)&&0!==i.length){e.n=3;break}return e.a(2);case 3:a=!1,s={},c=we(i),e.p=4,c.s();case 5:if((d=c.n()).done){e.n=10;break}if(delete(u=d.value).gumGroup,u.type&&["audio","video"].includes(u.type)){e.n=6;break}return e.a(3,9);case 6:if(u.capture&&!(u.capture instanceof MediaStreamTrack)){e.n=7;break}return e.a(3,9);case 7:if(l=u.group?u.group:"default",s[l]||(s[l]={}),!s[l][u.type]){e.n=8;break}return e.a(3,9);case 8:u.gumGroup=l,s[l][u.type]=u;case 9:e.n=5;break;case 10:e.n=12;break;case 11:e.p=11,T=e.v,c.e(T);case 12:return e.p=12,c.f(),e.f(12);case 13:for(p=Object.keys(s),f=0,h=p;f<h.length;f++)m=h[f],(v=s[m]).audio&&v.video||(v.audio&&delete v.audio.gumGroup,v.video&&delete v.video.gumGroup,delete s[m]);y=!!n.jsep,b=we(i),e.p=14,w=ge().m(function e(){var n,i,c,d,u,l,p,f,h,m,v,b,S,w,T,k,x,E,R,P,j,I,A,_,O,M,N,L,F,q,G,U,H,V;return ge().w(function(e){for(;;)switch(e.n){case 0:if((n=C.value).type){e.n=1;break}return Re.warn("Missing track type:",n),e.a(2,0);case 1:if("data"!==n.type){e.n=3;break}if(!o.pc.ondatachannel){e.n=2;break}return Re.warn("Data channel exists already, not creating another one"),e.a(2,0);case 2:return Re.log("Creating default data channel"),D(t,Re.dataChanDefaultLabel,null,!1),o.pc.ondatachannel=function(e){Re.log("Data channel created by Janus:",e),D(t,e.channel.label,e.channel.protocol,e.channel)},e.a(2,0);case 3:if(void 0!==n.add&&null!==n.add||void 0!==n.remove&&null!==n.remove||void 0!==n.replace&&null!==n.replace||(n.add=!0),!(n.add&&n.remove||n.add&&n.remove&&n.replace)){e.n=4;break}return Re.warn("Conflicting actions for track, ignoring:",n),e.a(2,0);case 4:if(n.add&&n.replace?(Re.warn("Both add and replace provided, falling back to replace:",n),delete n.add):n.remove&&n.replace&&(Re.warn("Both remove and replace provided, falling back to remove:",n),delete n.replace),i=n.type,"screen"===n.type&&(i="video"),c=null,d=null,n.mid?c=o.pc.getTransceivers().find(function(e){return e.mid===n.mid&&e.receiver.track.kind===i}):n.add||(c=o.pc.getTransceivers().find(function(e){return e.receiver.track.kind===i})),!n.replace&&!n.remove){e.n=7;break}if(c){e.n=5;break}return Re.warn("Couldn't find a transceiver for track:",n),e.a(2,0);case 5:if(c.sender){e.n=6;break}return Re.warn("No sender in the transceiver for track:",n),e.a(2,0);case 6:d=c.sender;case 7:if(!y||c){e.n=8;break}if(c=o.pc.getTransceivers().find(function(e){return e.receiver.track.kind===i}),c){e.n=8;break}return Re.warn("Couldn't find a transceiver for track:",n),e.a(2,0);case 8:if(u=null,l=null,!n.remove&&!n.replace){e.n=10;break}return Re.log("Removing track from PeerConnection",n),l=d.track?d.track.id:null,e.n=9,d.replaceTrack(null);case 9:if(l&&o.myStream){if(p=null,"audio"===i&&o.myStream.getAudioTracks()&&o.myStream.getAudioTracks().length){f=we(o.myStream.getAudioTracks());try{for(f.s();!(h=f.n()).done;)(m=h.value).id===l&&(p=m,Re.log("Removing audio track:",p))}catch(e){f.e(e)}finally{f.f()}}else if("video"===i&&o.myStream.getVideoTracks()&&o.myStream.getVideoTracks().length){v=we(o.myStream.getVideoTracks());try{for(v.s();!(b=v.n()).done;)(S=b.value).id===l&&(p=S,Re.log("Removing video track:",p))}catch(e){v.e(e)}finally{v.f()}}if(p){try{o.myStream.removeTrack(p),r.onlocaltrack(p,!1)}catch(e){Re.error("Error calling onlocaltrack on removal for renegotiation",e)}if(!0!==p.dontStop)try{p.stop()}catch(e){}}}case 10:if(!n.capture){e.n=29;break}if(!(n.gumGroup&&s[n.gumGroup]&&s[n.gumGroup].stream)){e.n=11;break}w=s[n.gumGroup].stream,u="audio"===n.type?w.getAudioTracks()[0]:w.getVideoTracks()[0],delete s[n.gumGroup].stream,delete s[n.gumGroup],delete n.gumGroup,e.n=17;break;case 11:if(!(n.capture instanceof MediaStreamTrack)){e.n=12;break}u=n.capture,e.n=17;break;case 12:if(a||(a=!0,r.consentDialog(!0)),T=Re.trackConstraints(n),k=null,"audio"!==n.type&&"video"!==n.type){e.n=14;break}return n.gumGroup&&(x="audio"===n.type?"video":"audio",s[n.gumGroup]&&s[n.gumGroup][x]&&(E=s[n.gumGroup][x],R=Re.trackConstraints(E),T[x]=R[x])),e.n=13,navigator.mediaDevices.getUserMedia(T);case 13:k=e.v,n.gumGroup&&T.audio&&T.video&&(s[n.gumGroup].stream=k,delete n.gumGroup),e.n=16;break;case 14:return e.n=15,navigator.mediaDevices.getDisplayMedia(T);case 15:k=e.v;case 16:u="audio"===n.type?k.getAudioTracks()[0]:k.getVideoTracks()[0];case 17:if(!n.replace){e.n=19;break}return e.n=18,d.replaceTrack(u);case 18:P="sendrecv",!1!==n.recv&&"inactive"!==c.direction&&"sendonly"!==c.direction||(P="sendonly"),c.setDirection?c.setDirection(P):c.direction=P,e.n=28;break;case 19:if(o.myStream||(o.myStream=new MediaStream),"audio"===i||!n.simulcast&&!n.svc?(d=o.pc.addTrack(u,o.myStream),c=o.pc.getTransceivers().find(function(e){return e.sender===d})):n.simulcast?(Re.log("Enabling rid-based simulcasting:",u),j=g(n.simulcastMaxBitrates),c=o.pc.addTransceiver(u,{direction:"sendrecv",streams:[o.myStream],sendEncodings:n.sendEncodings||[{rid:"h",active:!0,scalabilityMode:"L1T2",maxBitrate:j.high},{rid:"m",active:!0,scalabilityMode:"L1T2",maxBitrate:j.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,scalabilityMode:"L1T2",maxBitrate:j.low,scaleResolutionDownBy:4}]})):(Re.log("Enabling SVC ("+n.svc+"):",u),c=o.pc.addTransceiver(u,{direction:"sendrecv",streams:[o.myStream],sendEncodings:[{scalabilityMode:n.svc}]})),d||(d=c?c.sender:null),n.codec)if("firefox"===Re.webRTCAdapter.browserDetails.browser)Re.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",n);else if("string"!=typeof n.codec)Re.warn("Invalid codec value, ignoring for track:",n);else if(I=i+"/"+n.codec.toLowerCase(),(A=RTCRtpReceiver.getCapabilities(i).codecs.filter(function(e){return e.mimeType.toLowerCase()===I}))&&0!==A.length){if(c)try{c.setCodecPreferences(A)}catch(e){Re.warn("Failed enforcing codec for this "+i+" track:",e)}}else Re.warn("Codec not supported in this browser for this track, ignoring:",n);if(!n.bitrate){e.n=23;break}if(!n.simulcast&&!n.svc){e.n=20;break}Re.warn("Ignoring bitrate for simulcast/SVC track, use sendEncodings for that"),e.n=23;break;case 20:if(!(isNaN(n.bitrate)||n.bitrate<0)){e.n=21;break}Re.warn("Ignoring invalid bitrate for track:",n),e.n=23;break;case 21:if(!d){e.n=23;break}if((_=d.getParameters())&&_.encodings&&0!==_.encodings.length){e.n=22;break}Re.warn("No encodings in the sender parameters, ignoring bitrate for track:",n),e.n=23;break;case 22:return _.encodings[0].maxBitrate=n.bitrate,e.n=23,d.setParameters(_);case 23:if("video"!==i||!n.framerate){e.n=27;break}if(!n.simulcast&&!n.svc){e.n=24;break}Re.warn("Ignoring framerate for simulcast/SVC track, use sendEncodings for that"),e.n=27;break;case 24:if(!(isNaN(n.framerate)||n.framerate<0)){e.n=25;break}Re.warn("Ignoring invalid framerate for track:",n),e.n=27;break;case 25:if(!d){e.n=27;break}if((O=d.getParameters())&&O.encodings&&0!==O.encodings.length){e.n=26;break}Re.warn("No encodings in the sender parameters, ignoring framerate for track:",n),e.n=27;break;case 26:return O.encodings[0].maxFramerate=n.framerate,e.n=27,d.setParameters(O);case 27:n.transforms&&(d&&n.transforms.sender&&(M=null,RTCRtpSender.prototype.createEncodedStreams?M=d.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&("audio"===i?M=d.createEncodedAudioStreams():"video"===i&&(M=d.createEncodedVideoStreams())),M&&(console.log("Insertable Streams sender transform:",M),M.readableStream&&M.writableStream?M.readableStream.pipeThrough(n.transforms.sender).pipeTo(M.writableStream):M.readable&&M.writable&&M.readable.pipeThrough(n.transforms.sender).pipeTo(M.writable))),c&&c.receiver&&n.transforms.receiver&&(N=null,RTCRtpReceiver.prototype.createEncodedStreams?N=c.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===i?N=c.receiver.createEncodedAudioStreams():"video"===i&&(N=c.receiver.createEncodedVideoStreams())),N&&(console.log("Insertable Streams receiver transform:",N),N.readableStream&&N.writableStream?N.readableStream.pipeThrough(n.transforms.receiver).pipeTo(N.writableStream):N.readable&&N.writable&&N.readable.pipeThrough(n.transforms.receiver).pipeTo(N.writable))));case 28:u&&!0===n.dontStop&&(u.dontStop=!0),e.n=30;break;case 29:if(n.recv&&(c||(c=o.pc.addTransceiver(i)),c)){if(n.codec)if("firefox"===Re.webRTCAdapter.browserDetails.browser)Re.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",n);else if("string"!=typeof n.codec)Re.warn("Invalid codec value, ignoring for track:",n);else if(L=i+"/"+n.codec.toLowerCase(),(F=RTCRtpReceiver.getCapabilities(i).codecs.filter(function(e){return e.mimeType.toLowerCase()===L}))&&0!==F.length)try{c.setCodecPreferences(F)}catch(e){Re.warn("Failed enforcing codec for this "+i+" track:",e)}else Re.warn("Codec not supported in this browser for this track, ignoring:",n);c.receiver&&n.transforms&&n.transforms.receiver&&(q=null,RTCRtpReceiver.prototype.createEncodedStreams?q=c.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&("audio"===i?q=c.receiver.createEncodedAudioStreams():"video"===i&&(q=c.receiver.createEncodedVideoStreams())),q&&(console.log("Insertable Streams receiver transform:",q),q.readableStream&&q.writableStream?q.readableStream.pipeThrough(n.transforms.receiver).pipeTo(q.writableStream):q.readable&&q.writable&&q.readable.pipeThrough(n.transforms.receiver).pipeTo(q.writable)))}case 30:if(u){o.myStream.addTrack(u),u.onended=function(e){Re.log("Local track removed:",e);try{r.onlocaltrack(e.target,!1)}catch(e){Re.error("Error calling onlocaltrack following end",e)}};try{r.onlocaltrack(u,!0)}catch(e){Re.error("Error calling onlocaltrack for track add",e)}}c&&(G=c.direction,U=null,H=u&&c.sender.track,V=!1!==n.recv&&c.receiver.track,H&&V?U="sendrecv":H&&!V?U="sendonly":!H&&V?U="recvonly":H||V||(U="inactive"),U&&U!==G&&(Re.warn("Changing direction of transceiver to "+U+" (was "+G+")",n),c.setDirection?c.setDirection(U):c.direction=U));case 31:return e.a(2)}},e)}),b.s();case 15:if((C=b.n()).done){e.n=18;break}return e.d(ve(w()),16);case 16:if(0!==e.v){e.n=17;break}return e.a(3,17);case 17:e.n=15;break;case 18:e.n=20;break;case 19:e.p=19,k=e.v,b.e(k);case 20:return e.p=20,b.f(),e.f(20);case 21:a&&r.consentDialog(!1);case 22:return e.a(2)}},e,null,[[14,19,20,21],[4,11,12,13]])}))).apply(this,arguments)}function J(e){var t=S.get(e);if(!t||!t.webrtcStuff)return Re.warn("Invalid handle"),null;var n=t.webrtcStuff;if(!n.pc)return Re.warn("Invalid PeerConnection"),null;var r,o=[],i=we(n.pc.getTransceivers());try{for(i.s();!(r=i.n()).done;){var a=r.value,s=null;a.sender&&a.sender.track&&((s={mid:a.mid}).type=a.sender.track.kind,s.id=a.sender.track.id,s.label=a.sender.track.label),s&&o.push(s)}}catch(e){i.e(e)}finally{i.f()}return o}function z(e){var t=S.get(e);if(!t||!t.webrtcStuff)return Re.warn("Invalid handle"),null;var n=t.webrtcStuff;if(!n.pc)return Re.warn("Invalid PeerConnection"),null;var r,o=[],i=we(n.pc.getTransceivers());try{for(i.s();!(r=i.n()).done;){var a=r.value,s=null;a.receiver&&a.receiver.track&&((s={mid:a.mid}).type=a.receiver.track.kind,s.id=a.receiver.track.id,s.label=a.receiver.track.label),s&&o.push(s)}}catch(e){i.e(e)}finally{i.f()}return o}function $(e,t,n,r){r="function"==typeof r?r:Re.noop;var o=S.get(e);if(!o||!o.webrtcStuff)return Re.warn("Invalid handle"),void r(0);var i=n?"remote":"local",a=o.webrtcStuff;if(a.volume[i]||(a.volume[i]={value:0}),a.pc&&a.pc.getStats&&("chrome"===Re.webRTCAdapter.browserDetails.browser||"safari"===Re.webRTCAdapter.browserDetails.browser)){var s=a.pc;if(t){var c=a.pc.getTransceivers().find(function(e){return e.mid===t&&"audio"===e.receiver.track.kind});if(!c)return Re.warn("No audio transceiver with mid "+t),void r(0);if(n&&!c.receiver)return Re.warn("Remote transceiver track unavailable"),void r(0);if(!n&&!c.sender)return Re.warn("Local transceiver track unavailable"),void r(0);s=n?c.receiver:c.sender}return s.getStats().then(function(e){e.forEach(function(e){e&&"audio"===e.kind&&(n&&!e.remoteSource||!n&&"media-source"!==e.type||r(e.audioLevel?e.audioLevel:0))})}),a.volume[i].value}return Re.warn("Getting the "+i+" volume unsupported by browser"),void r(0)}function X(e,t,n){var r=S.get(e);if(!r||!r.webrtcStuff)return Re.warn("Invalid handle"),!0;var o=r.webrtcStuff;if(!o.pc)return Re.warn("Invalid PeerConnection"),!0;if(!o.myStream)return Re.warn("Invalid local MediaStream"),!0;if(n){if(!o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length)return Re.warn("No video track"),!0;if(t){var i=o.pc.getTransceivers().find(function(e){return e.mid===t&&"video"===e.receiver.track.kind});return i?i.sender&&i.sender.track?!i.sender.track.enabled:(Re.warn("No video sender with mid "+t),!0):(Re.warn("No video transceiver with mid "+t),!0)}return!o.myStream.getVideoTracks()[0].enabled}if(!o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length)return Re.warn("No audio track"),!0;if(t){var a=o.pc.getTransceivers().find(function(e){return e.mid===t&&"audio"===e.receiver.track.kind});return a?a.sender&&a.sender.track?!a.sender.track.enabled:(Re.warn("No audio sender with mid "+t),!0):(Re.warn("No audio transceiver with mid "+t),!0)}return!o.myStream.getAudioTracks()[0].enabled}function K(e,t,n,r){var o=S.get(e);if(!o||!o.webrtcStuff)return Re.warn("Invalid handle"),!1;var i=o.webrtcStuff;if(!i.pc)return Re.warn("Invalid PeerConnection"),!1;if(!i.myStream)return Re.warn("Invalid local MediaStream"),!1;if(n){if(!i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length)return Re.warn("No video track"),!1;if(t){var a=i.pc.getTransceivers().find(function(e){return e.mid===t&&"video"===e.receiver.track.kind});if(!a)return Re.warn("No video transceiver with mid "+t),!1;if(!a.sender||!a.sender.track)return Re.warn("No video sender with mid "+t),!1;a.sender.track.enabled=!r}else{var s,c=we(i.myStream.getVideoTracks());try{for(c.s();!(s=c.n()).done;)s.value.enabled=!r}catch(e){c.e(e)}finally{c.f()}}}else{if(!i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length)return Re.warn("No audio track"),!1;if(t){var d=i.pc.getTransceivers().find(function(e){return e.mid===t&&"audio"===e.receiver.track.kind});if(!d)return Re.warn("No audio transceiver with mid "+t),!1;if(!d.sender||!d.sender.track)return Re.warn("No audio sender with mid "+t),!1;d.sender.track.enabled=!r}else{var u,l=we(i.myStream.getAudioTracks());try{for(l.s();!(u=l.n()).done;)u.value.enabled=!r}catch(e){l.e(e)}finally{l.f()}}}return!0}function Y(e,t){var n=S.get(e);if(!n||!n.webrtcStuff)return Re.warn("Invalid handle"),"Invalid handle";var r=n.webrtcStuff;if(!r.pc)return"Invalid PeerConnection";if(r.pc.getStats){var o=r.pc,i=t||"default";if(t){var a=r.pc.getTransceivers().find(function(e){return e.mid===t&&"video"===e.receiver.track.kind});if(!a)return Re.warn("No video transceiver with mid "+t),"No video transceiver with mid "+t;if(!a.receiver)return Re.warn("No video receiver with mid "+t),"No video receiver with mid "+t;o=a.receiver}return r.bitrate[i]||(r.bitrate[i]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),r.bitrate[i].timer?r.bitrate[i].value:(Re.log("Starting bitrate timer"+(t?" for mid "+t:"")+" (via getStats)"),r.bitrate[i].timer=setInterval(function(){o.getStats().then(function(e){e.forEach(function(e){if(e){var t=!1;if(("video"===e.mediaType||"video"===e.kind||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(r.bitrate[i].bsnow=e.bytesReceived,r.bitrate[i].tsnow=e.timestamp,null===r.bitrate[i].bsbefore||null===r.bitrate[i].tsbefore)r.bitrate[i].bsbefore=r.bitrate[i].bsnow,r.bitrate[i].tsbefore=r.bitrate[i].tsnow;else{var n=r.bitrate[i].tsnow-r.bitrate[i].tsbefore;"safari"===Re.webRTCAdapter.browserDetails.browser&&(n/=1e3);var o=Math.round(8*(r.bitrate[i].bsnow-r.bitrate[i].bsbefore)/n);"safari"===Re.webRTCAdapter.browserDetails.browser&&(o=parseInt(o/1e3)),r.bitrate[i].value=o+" kbits/sec",r.bitrate[i].bsbefore=r.bitrate[i].bsnow,r.bitrate[i].tsbefore=r.bitrate[i].tsnow}}})})},1e3),"0 kbits/sec")}return Re.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function Q(e,t,n){var r=S.get(e);if(r&&r.webrtcStuff){var o=r.webrtcStuff;if(o.pc){var i=o.pc.getTransceivers().find(function(e){return e.mid===t});if(i)if(i.sender){var a=i.sender.getParameters();a&&a.encodings&&0!==a.encodings.length?a.encodings.length>1?Re.warn("Ignoring bitrate for simulcast track, use sendEncodings for that"):isNaN(n)||n<0?Re.warn("Invalid bitrate (must be a positive integer)"):(a.encodings[0].maxBitrate=n,i.sender.setParameters(a)):Re.warn("No parameters encodings")}else Re.warn("No sender for transceiver with mid",t);else Re.warn("No transceiver with mid",t)}else Re.warn("Invalid PeerConnection")}else Re.warn("Invalid handle")}function Z(e){Re.error("WebRTC error:",e)}function ee(e,r){Re.log("Cleaning WebRTC stuff");var o=S.get(e);if(o){var i=o.webrtcStuff;if(i){if(!0===r){var a={janus:"hangup",transaction:Re.randomString(12)};o.token&&(a.token=o.token),h&&(a.apisecret=h),Re.debug("Sending hangup request (handle="+e+"):"),Re.debug(a),t?(a.session_id=b,a.handle_id=e,n.send(JSON.stringify(a))):Re.httpAPICall(s+"/"+b+"/"+e,{verb:"POST",withCredentials:l,body:a})}for(var c in i.volume&&(i.volume.local&&i.volume.local.timer&&clearInterval(i.volume.local.timer),i.volume.remote&&i.volume.remote.timer&&clearInterval(i.volume.remote.timer)),i.bitrate)i.bitrate[c].timer&&clearInterval(i.bitrate[c].timer);i.bitrate={},!i.streamExternal&&i.myStream&&(Re.log("Stopping local stream tracks"),Re.stopAllTracks(i.myStream)),i.streamExternal=!1,i.myStream=null;try{i.pc.close()}catch(e){}i.pc=null,i.candidates=null,i.mySdp=null,i.remoteSdp=null,i.iceDone=!1,i.dataChannel={},i.dtmfSender=null,i.insertableStreams=!1,i.externalEncryption=!1}o.oncleanup()}}function te(e){return Re.debug("isTrickleEnabled:",e),!1!==e}R(e),this.getServer=function(){return s},this.isConnected=function(){return y},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:Re.noop,e.error="function"==typeof e.error?e.error:Re.noop,e.reconnect=!0,R(e)},this.getSessionId=function(){return b},this.getInfo=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:Re.noop,e.error="function"==typeof e.error?e.error:Re.noop,Re.log("Getting info on Janus instance"),!y)return Re.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var r=Re.randomString(12),o={janus:"info",transaction:r};if(f&&(o.token=f),h&&(o.apisecret=h),t)return T.set(r,function(t){Re.log("Server info:"),Re.debug(t),"server_info"!==t.janus&&Re.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)}),void n.send(JSON.stringify(o));Re.httpAPICall(s,{verb:"POST",withCredentials:l,body:o,success:function(t){Re.log("Server info:"),Re.debug(t),"server_info"!==t.janus&&Re.error("Ooops: "+t.error.code+" "+t.error.reason),e.success(t)},error:function(t,n){Re.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)},this.destroy=function(i){!function(i){(i=i||{}).success="function"==typeof i.success?i.success:Re.noop,i.error="function"==typeof i.error?i.error:Re.noop;var a=!0===i.unload,c=!0;void 0!==i.notifyDestroyed&&null!==i.notifyDestroyed&&(c=!0===i.notifyDestroyed);var d=!0===i.cleanupHandles;if(Re.log("Destroying session "+b+" (unload="+a+")"),!b)return Re.warn("No session to destroy"),i.success(),void(c&&e.destroyed());if(d){var u,p=we(S.keys());try{for(p.s();!(u=p.n()).done;)_(u.value,{noRequest:!0})}catch(e){p.e(e)}finally{p.f()}}if(!y)return Re.warn("Is the server down? (connected=false)"),b=null,void i.success();var m={janus:"destroy",transaction:Re.randomString(12)};if(f&&(m.token=f),h&&(m.apisecret=h),a)return t?(n.onclose=null,n.close(),n=null):navigator.sendBeacon(s+"/"+b,JSON.stringify(m)),Re.log("Destroyed session:"),b=null,y=!1,i.success(),void(c&&e.destroyed());if(t){m.session_id=b;var v=function(){for(var e in r)n.removeEventListener(e,r[e]);n.removeEventListener("message",g),n.removeEventListener("error",C),o&&clearTimeout(o),n.close()},g=function(t){var n=JSON.parse(t.data);n.session_id==m.session_id&&n.transaction==m.transaction&&(v(),i.success(),c&&e.destroyed())},C=function(){v(),i.error("Failed to destroy the server: Is the server down?"),c&&e.destroyed()};return n.addEventListener("message",g),n.addEventListener("error",C),void(1===n.readyState?n.send(JSON.stringify(m)):C())}Re.httpAPICall(s+"/"+b,{verb:"POST",withCredentials:l,body:m,success:function(t){Re.log("Destroyed session:"),Re.debug(t),b=null,y=!1,"success"!==t.janus&&Re.error("Ooops: "+t.error.code+" "+t.error.reason),i.success(),c&&e.destroyed()},error:function(t,n){Re.error(t+":",n),b=null,y=!1,i.success(),c&&e.destroyed()}})}(i)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:Re.noop,e.error="function"==typeof e.error?e.error:Re.noop,e.dataChannelOptions=e.dataChannelOptions||{ordered:!0},e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:Re.noop,e.connectionState="function"==typeof e.connectionState?e.connectionState:Re.noop,e.iceState="function"==typeof e.iceState?e.iceState:Re.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:Re.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:Re.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:Re.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:Re.noop,e.onlocaltrack="function"==typeof e.onlocaltrack?e.onlocaltrack:Re.noop,e.onremotetrack="function"==typeof e.onremotetrack?e.onremotetrack:Re.noop,e.ondata="function"==typeof e.ondata?e.ondata:Re.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:Re.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:Re.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:Re.noop,!y)return Re.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var r=e.plugin;if(!r)return Re.error("Invalid plugin"),void e.error("Invalid plugin");var o=e.opaqueId,i=e.loopIndex,a=e.token?e.token:f,c=Re.randomString(12),d={janus:"attach",plugin:r,opaque_id:o,loop_index:i,transaction:c};if(a&&(d.token=a),h&&(d.apisecret=h),t)return T.set(c,function(t){if(Re.debug(t),"success"!==t.janus)return Re.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;Re.log("Created handle: "+n);var o={session:C,plugin:r,id:n,token:a,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(e,t){return $(n,e,!0,t)},getRemoteVolume:function(e,t){return $(n,e,!0,t)},getLocalVolume:function(e,t){return $(n,e,!1,t)},isAudioMuted:function(e){return X(n,e,!1)},muteAudio:function(e){return K(n,e,!1,!0)},unmuteAudio:function(e){return K(n,e,!1,!1)},isVideoMuted:function(e){return X(n,e,!0)},muteVideo:function(e){return K(n,e,!0,!0)},unmuteVideo:function(e){return K(n,e,!0,!1)},getBitrate:function(e){return Y(n,e)},setMaxBitrate:function(e,t){return Q(n,e,t)},send:function(e){P(n,e)},data:function(e){I(n,e)},dtmf:function(e){A(n,e)},consentDialog:e.consentDialog,connectionState:e.connectionState,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){M(n,!0,e)},createAnswer:function(e){M(n,!1,e)},handleRemoteJsep:function(e){L(n,e)},replaceTracks:function(e){H(n,e)},getLocalTracks:function(){return J(n)},getRemoteTracks:function(){return z(n)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){ee(n,!0===e)},detach:function(e){_(n,e)}};S.set(n,o),e.success(o)}),d.session_id=b,void n.send(JSON.stringify(d));Re.httpAPICall(s+"/"+b,{verb:"POST",withCredentials:l,body:d,success:function(t){if(Re.debug(t),"success"!==t.janus)return Re.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;Re.log("Created handle: "+n);var o={session:C,plugin:r,id:n,token:a,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:e.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(e,t){return $(n,e,!0,t)},getRemoteVolume:function(e,t){return $(n,e,!0,t)},getLocalVolume:function(e,t){return $(n,e,!1,t)},isAudioMuted:function(e){return X(n,e,!1)},muteAudio:function(e){return K(n,e,!1,!0)},unmuteAudio:function(e){return K(n,e,!1,!1)},isVideoMuted:function(e){return X(n,e,!0)},muteVideo:function(e){return K(n,e,!0,!0)},unmuteVideo:function(e){return K(n,e,!0,!1)},getBitrate:function(e){return Y(n,e)},setMaxBitrate:function(e,t){return Q(n,e,t)},send:function(e){P(n,e)},data:function(e){I(n,e)},dtmf:function(e){A(n,e)},consentDialog:e.consentDialog,connectionState:e.connectionState,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){M(n,!0,e)},createAnswer:function(e){M(n,!1,e)},handleRemoteJsep:function(e){L(n,e)},replaceTracks:function(e){H(n,e)},getLocalTracks:function(){return J(n)},getRemoteTracks:function(){return z(n)},onlocaltrack:e.onlocaltrack,onremotetrack:e.onremotetrack,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){ee(n,!0===e)},detach:function(e){_(n,e)}};S.set(n,o),e.success(o)},error:function(t,n){Re.error(t+":",n),""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}(e)}}Re.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,r=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new r(e,t)},extension:e&&e.extension||Ee,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||me,httpAPICall:function(e,r){var o={method:r.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===r.verb&&(o.headers["Content-Type"]="application/json"),void 0!==r.withCredentials&&(o.credentials=!0===r.withCredentials?"include":r.withCredentials?r.withCredentials:"omit"),r.body&&(o.body=JSON.stringify(r.body));var i=t(e,o).catch(function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})});if(r.timeout){var a=new n(function(e,t){var n=setTimeout(function(){return clearTimeout(n),t({message:"Request timed out",timeout:r.timeout})},r.timeout)});i=n.race([i,a])}return i.then(function(e){return e.ok?xe(r.success)===xe(Re.noop)?e.json().then(function(e){try{r.success(e)}catch(e){Re.error("Unhandled httpAPICall success callback error",e)}},function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})}):void 0:n.reject({message:"API call failed",response:e})}).catch(function(e){xe(r.error)===xe(Re.noop)&&r.error(e.message||"<< internal error >>",e)}),i}}},Re.useOldDependencies=function(e){var t=e&&e.jQuery||c(),n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||Ee,webRTCAdapter:e&&e.adapter||me,httpAPICall:function(e,n){var r=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},o=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(r,o,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){xe(n.success)===xe(Re.noop)&&n.success(e)},error:function(e,t,r){xe(n.error)===xe(Re.noop)&&n.error(t,r)}}))}}},Re.mediaToTracks=function(e){var t=[];if(e){if(!e.keepAudio&&!1!==e.audio&&(void 0===e.audio||e.audio||e.audioSend||e.audioRecv||e.addAudio||e.replaceAudio||e.removeAudio)){var n={type:"audio"};e.removeAudio?n.remove=!0:(e.addAudio?n.add=!0:e.replaceAudio&&(n.replace=!0),!1!==e.audioSend&&(n.capture=e.audio||!0),!1!==e.audioRecv&&(n.recv=!0)),(n.remove||n.capture||n.recv)&&t.push(n)}if(!e.keepVideo&&!1!==e.video&&(void 0===e.video||e.video||e.videoSend||e.videoRecv||e.addVideo||e.replaceVideo||e.removeVideo)){var r={type:"video"};e.removeVideo?r.remove=!0:(e.addVideo?r.add=!0:e.replaceVideo&&(r.replace=!0),!1!==e.videoSend&&(r.capture=e.video||!0,["screen","window","desktop"].includes(r.capture)&&(r.type="screen",r.capture={video:{}},e.screenshareFrameRate&&(r.capture.frameRate=e.screenshareFrameRate),e.screenshareHeight&&(r.capture.height=e.screenshareHeight),e.screenshareWidth&&(r.capture.width=e.screenshareWidth))),!1!==e.videoRecv&&(r.recv=!0)),(r.remove||r.capture||r.recv)&&t.push(r)}e.data&&t.push({type:"data"})}else t.push({type:"audio",capture:!0,recv:!0}),t.push({type:"video",capture:!0,recv:!0});return t},Re.trackConstraints=function(e){var t={};if(!e||!e.capture)return t;if("audio"===e.type)t.audio=e.capture;else if("video"===e.type)if((e.simulcast||e.svc)&&!0===e.capture&&(e.capture="hires"),!0===e.capture||"object"===xe(e.capture))t.video=e.capture;else{var n=0,r=0;"lowres"===e.capture?(n=320,r=240):"lowres-16:9"===e.capture?(n=320,r=180):"hires"===e.capture||"hires-16:9"===e.capture||"hdres"===e.capture?(n=1280,r=720):"fhdres"===e.capture?(n=1920,r=1080):"4kres"===e.capture?(n=3840,r=2160):"stdres"===e.capture?(n=640,r=480):"stdres-16:9"===e.capture?(n=640,r=360):(Re.log("Default video setting is stdres 4:3"),n=640,r=480),t.video={width:{ideal:n},height:{ideal:r}}}else"screen"===e.type&&(t.video=e.capture);return t},Re.noop=function(){},Re.dataChanDefaultLabel="JanusDataChannel",Re.endOfCandidates=null,Re.stopAllTracks=function(e){try{var t,n=we(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;Re.log(r),r&&!0!==r.dontStop&&r.stop()}}catch(e){n.e(e)}finally{n.f()}}catch(e){}},Re.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:Re.noop,Re.initDone)e.callback();else{if(void 0===console.log&&(console.log=function(){}),Re.trace=Re.noop,Re.debug=Re.noop,Re.vdebug=Re.noop,Re.log=Re.noop,Re.warn=Re.noop,Re.error=Re.noop,!0===e.debug||"all"===e.debug)Re.trace=console.trace.bind(console),Re.debug=console.debug.bind(console),Re.vdebug=console.debug.bind(console),Re.log=console.log.bind(console),Re.warn=console.warn.bind(console),Re.error=console.error.bind(console);else if(Array.isArray(e.debug)){var t,n=we(e.debug);try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r){case"trace":Re.trace=console.trace.bind(console);break;case"debug":Re.debug=console.debug.bind(console);break;case"vdebug":Re.vdebug=console.debug.bind(console);break;case"log":Re.log=console.log.bind(console);break;case"warn":Re.warn=console.warn.bind(console);break;case"error":Re.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+r+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}}}catch(e){n.e(e)}finally{n.f()}}Re.log("Initializing library");var o=e.dependencies||Re.useDefaultDependencies();Re.isArray=o.isArray,Re.webRTCAdapter=o.webRTCAdapter,Re.httpAPICall=o.httpAPICall,Re.newWebSocket=o.newWebSocket,Re.extension=o.extension,Re.extension.init(),Re.listDevices=function(e,t){e="function"==typeof e?e:Re.noop,t||(t={audio:!0,video:!0}),Re.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then(function(t){navigator.mediaDevices.enumerateDevices().then(function(n){Re.debug(n),e(n),Re.stopAllTracks(t)})}).catch(function(t){Re.error(t),e([])}):(Re.warn("navigator.mediaDevices unavailable"),e([]))},Re.attachMediaStream=function(e,t){try{e.srcObject=t}catch(n){try{e.src=URL.createObjectURL(t)}catch(e){Re.error("Error attaching stream to element",e)}}},Re.reattachMediaStream=function(e,t){try{e.srcObject=t.srcObject}catch(n){try{e.src=t.src}catch(e){Re.error("Error reattaching stream to element",e)}}};var i=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",a=window["on"+i];if(window.addEventListener(i,function(){Re.log("Closing window");var e,t=we(Re.sessions);try{for(t.s();!(e=t.n()).done;){var n=Ce(e.value,2),r=n[0],o=n[1];o&&o.destroyOnUnload&&(Re.log("Destroying session "+r),o.destroy({unload:!0,notifyDestroyed:!1}))}}catch(e){t.e(e)}finally{t.f()}a&&"function"==typeof a&&a()}),Re.safariVp8=!1,Re.safariVp9=!1,"safari"===Re.webRTCAdapter.browserDetails.browser&&Re.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){var s,c=we(RTCRtpSender.getCapabilities("video").codecs);try{for(c.s();!(s=c.n()).done;){var d=s.value;d&&d.mimeType&&"video/vp8"===d.mimeType.toLowerCase()?Re.safariVp8=!0:d&&d.mimeType&&"video/vp9"===d.mimeType.toLowerCase()&&(Re.safariVp9=!0)}}catch(e){c.e(e)}finally{c.f()}Re.safariVp8?Re.log("This version of Safari supports VP8"):Re.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var u=new RTCPeerConnection({});u.createOffer({offerToReceiveVideo:!0}).then(function(e){Re.safariVp8=-1!==e.sdp.indexOf("VP8"),Re.safariVp9=-1!==e.sdp.indexOf("VP9"),Re.safariVp8?Re.log("This version of Safari supports VP8"):Re.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),u.close(),u=null})}Re.initDone=!0,e.callback()}},Re.isWebrtcSupported=function(){return!!window.RTCPeerConnection},Re.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},Re.randomString=function(e){for(var t="",n=0;n<e;n++){var r=Math.floor(62*Math.random());t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r)}return t};const Pe=Re;var je=r(155),De=r.n(je);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach(function(t){Oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oe(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ne=function(e){var t,n,r=e.children,o=e.server,i=e.isTurnServerEnabled,a=e.daqIP,s=(0,je.useRef)(null),c=(t=(0,je.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],u=c[1];(0,je.useEffect)(function(){return l(),function(){u(null)}},[]);var l=function(){Pe.init({debug:"all",callback:function(){if(Pe.isWebrtcSupported()){var e={};i&&(console.log("inside session turn server"),console.log("turn:"+a+":3478","url"),e.iceServers=[{url:"turn:"+a+":3478",username:"janususer",credential:"januspwd"}],e.iceTransportPolicy="relay");var t=new Pe(_e(_e({},{server:o,success:function(){console.log("Janus loaded"),u(t)},error:function(e){Pe.error(e),u(null)},destroyed:function(){u(null)}}),e))}else console.log("No WebRTC support... ")}})};return De().createElement("div",{className:"janus-container",ref:s},r&&De().cloneElement(r,{janus:d,createConnection:l}))},Le=function(e){var t=e.children,n=e.janus;return e.roomId,(0,je.useEffect)(function(){},[n]),De().createElement("div",{className:"janus-video-room"},t&&t.length&&t.map(function(e,t){return De().cloneElement(e,{janus:n,key:t})}),t&&!t.length&&De().cloneElement(t,{janus:n}))};function Fe(e,t,n,r,o,i,a,s){var c=null,d=null;if(e)return e.attach({plugin:"janus.plugin.videoroom",opaqueId:t,success:function(e){if(c=e,Pe.log("  -- This is a publisher/manager"),a){var t={request:"create",notify_joining:!0,room:n,secret:r,pin:o};c.send({message:t,success:function(e){if(e.videoroom&&"created"===e.videoroom){var t={request:"join",room:e.room,ptype:"publisher",display:i};c.send({message:t}),s(c,"created",e)}},error:function(e){console.log("Error creating room "+e)}})}else{var d={request:"join",room:n,ptype:"publisher",display:i||""};c.send({message:d})}},error:function(e){Pe.log("  -- Error attaching plugin...",e),s(c,"error",e)},consentDialog:function(e){Pe.debug("Consent dialog should be "+(e?"on":"off")+" now")},mediaState:function(e,t){Pe.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Pe.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(e,t){Pe.debug(" ::: Got a message (publisher) :::"),Pe.debug(e),Pe.log("Got message",e);var n=e.videoroom;if(null!=n&&null!=n&&("joined"===n?s(c,"joined",e):"destroyed"===n?(Pe.warn("The room has been destroyed!"),s(c,"destroyed",n)):"event"===n&&(void 0!==e.error&&null!==e.error?s(c,"error",e):void 0!==e.publishers&&null!==e.publishers?s(c,"publishers",e):void 0!==e.leaving&&null!==e.leaving?s(c,"leaving",e):void 0!==e.unpublished&&null!==e.unpublished&&s(c,"unpublished",e))),null!=t){Pe.debug("Handling SDP as well..."),Pe.debug(t),c.handleRemoteJsep({jsep:t});var r=e.audio_codec;d&&d.getAudioTracks()&&d.getAudioTracks().length>0&&!r&&Pe.log("Our audio stream has been rejected, viewers won't hear us");var o=e.video_codec;d&&d.getVideoTracks()&&d.getVideoTracks().length>0&&!o&&Pe.log("Our video stream has been rejected, viewers won't see us")}},onlocalstream:function(e){Pe.debug(" ::: Got a local stream :::"),d=e,s(c,"onlocalstream",e)},onremotestream:function(e){},oncleanup:function(){Pe.log(" ::: Got a cleanup notification: we are unpublished now :::"),s(c,"oncleanup")}}),c}function qe(e,t){e.createOffer({media:{audioRecv:!1,videoRecv:!1,audioSend:t,videoSend:!0},simulcast:!1,success:function(n){Pe.debug("Got publisher SDP!"),Pe.debug(n);var r={request:"configure",audio:t,video:!0};e.send({message:r,jsep:n})},error:function(n){Pe.error("WebRTC error:",n),t?qe(e,!1):Pe.log("Error publishing feed: "+n)}})}const Ge=De().forwardRef(function(e,t){var n=e.isPublisher,r=e.status,o=e.isMuted,i=e.onStart,a=e.onStop,s=e.onMute,c=e.onUnmute,d=e.onBandwidthChange;return De().createElement("div",{className:"janus-video-container",ref:t},De().createElement("div",{className:"janus-video-status"},"Ready"===r&&De().createElement("span",{style:{color:"grey"}},"Ready"),"Paused"===r&&De().createElement("span",{style:{color:"grey"}},"Paused"),"Live"===r&&De().createElement("span",{style:{color:"green"}},"Live"),"Error"===r&&De().createElement("span",{style:{color:"red"}},"Error")),De().createElement("video",{className:"janus-video-player",autoPlay:!0,playsInline:!0}),n&&De().createElement("div",{className:"janus-video-controls"},"Paused"===r&&De().createElement("div",{className:"janus-btn",onClick:i},"Start Recording"),"Live"===r&&De().createElement("div",{className:"janus-btn",onClick:a},"Stop Recording"),"Live"===r&&De().createElement(De().Fragment,null,o&&De().createElement("div",{className:"janus-btn",onClick:c},"UnMute"),!o&&De().createElement("div",{className:"janus-btn",onClick:s},"Mute")),De().createElement("div",{className:"janus-select"},De().createElement("select",{onChange:function(e){d(1e3*parseInt(e.target.value))}},De().createElement("option",{value:0},"Auto"),De().createElement("option",{value:128},"128 kbit"),De().createElement("option",{value:256},"256 kbit"),De().createElement("option",{value:512},"512 kbit"),De().createElement("option",{value:1e3},"1 mbit"),De().createElement("option",{value:1500},"1.5 mbit"),De().createElement("option",{value:2e3},"2 mbit")))))});function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ve=function(e){var t=e.janus,n=e.opaqueId,r=e.room,o=e.secret,i=e.pin,a=e.username,s=e.setRoom,c=e.setPubId,d=e.setPubPvtId,u=Ue((0,je.useState)("Ready"),2),l=u[0],p=u[1],f=Ue((0,je.useState)(!1),2),h=f[0],m=f[1],v=Ue((0,je.useState)(null),2),g=v[0],y=v[1],b=(0,je.useRef)(null),S=null;return(0,je.useEffect)(function(){Fe(t,n,r,o,i,a,!0,function(e,t,n){if(y(e),"created"===t)s(n.room);else if("joined"===t){var r=n.id,o=n.private_id;c(r),d(o),p("Paused")}else if("onlocalstream"===t){S=n;var i=b.current.querySelector(".janus-video-player");Pe.attachMediaStream(i,S),"completed"!==e.webrtcStuff.pc.iceConnectionState&&"connected"!==e.webrtcStuff.pc.iceConnectionState&&p("Live");var a=S.getVideoTracks();null!=a&&0!==a.length||p("Error")}else"oncleanup"===t?(p("Paused"),m(!1)):"error"===t&&(p("Error"),m(!1))})},[t]),De().createElement("div",{className:"janus-publisher"},De().createElement("div",{className:"janus-video"},De().createElement(Ge,{ref:b,isPublisher:!0,status:l,isMuted:h,onStart:function(){qe(g,!0)},onStop:function(){!function(e){e.send({message:{request:"unpublish"}}),e.hangup()}(g),p("Paused")},onMute:function(){g.isAudioMuted()||g.muteAudio(),m(g.isAudioMuted())},onUnmute:function(){g.isAudioMuted()&&g.unmuteAudio(),m(g.isAudioMuted())},onBandwidthChange:function(e){g.send({message:{request:"configure",bitrate:e}})}})))};function We(e,t,n,r,o,i,a,s,c){var d=null;return e.attach({plugin:"janus.plugin.videoroom",opaqueId:t,success:function(e){(d=e).simulcastStarted=!1,Pe.log("Plugin attached! ("+d.getPlugin()+", id="+d.getId()+")"),Pe.log("  -- This is a subscriber");var t={request:"join",room:n,ptype:"subscriber",feed:r,private_id:o};"safari"!==Pe.webRTCAdapter.browserDetails.browser||"vp9"!==s&&("vp8"!==s||Pe.safariVp8)||(s&&(s=s.toUpperCase()),t.offer_video=!1),d.videoCodec=s,d.send({message:t})},error:function(e){Pe.error("  -- Error attaching plugin...",e),c(d,"error",e)},onmessage:function(e,t){Pe.debug(" ::: Got a message (subscriber) :::"),Pe.debug(e),null!=t&&(Pe.debug("SUBS: Handling SDP as well..."),Pe.debug(t),d.createAnswer({jsep:t,media:{audioSend:!1,videoSend:!1},success:function(e){Pe.debug("Got SDP!"),Pe.debug(e);var t={request:"start",room:n};d.send({message:t,jsep:e})},error:function(e){Pe.error("WebRTC error:",e)}}))},webrtcState:function(e){Pe.log("Janus says this WebRTC PeerConnection (feed #"+d.rfindex+") is "+(e?"up":"down")+" now")},onlocalstream:function(e){},onremotestream:function(e){c(d,"onremotestream",e)},oncleanup:function(){c(d,"oncleanup")}}),d}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ze=function(e){var t=e.janus,n=e.opaqueId,r=e.room,o=e.pubId,i=e.pubPvtId,a=(0,je.useRef)(null),s=Be((0,je.useState)("Ready"),2),c=s[0],d=s[1],u=Be((0,je.useState)(null),2),l=(u[0],u[1]),p=Be((0,je.useState)(null),2),f=p[0],h=p[1],m=null,v=function(e,t,n){if(h(e),"onremotestream"===t){m=n;var r=a.current.querySelector(".janus-video-player");Pe.attachMediaStream(r,m),"completed"!==e.webrtcStuff.pc.iceConnectionState&&"connected"!==e.webrtcStuff.pc.iceConnectionState&&d("Live");var o=m.getVideoTracks();null!=o&&0!==o.length||d("Error")}else"oncleanup"===t?d("Paused"):"error"===t&&d("Error")};return(0,je.useEffect)(function(){t&&r&&o&&i&&Fe(t,n,r,null,null,null,!1,function(e,o,a){if(l(e),"joined"===o){if(void 0!==a.publishers&&null!==a.publishers){var s=a.publishers;if(0==s.length)return;var c=s[0],d=c.id,u=(c.display,c.audio_codec,c.video_codec);We(t,n,r,d,i,0,0,u,v)}}else if("publishers"===o){if(void 0!==a.publishers&&null!==a.publishers){var p=a.publishers;if(0==p.length)return;var h=p[0],m=h.id,g=(h.display,h.audio_codec,h.video_codec);We(t,n,r,m,i,0,0,g,v)}}else"leaving"!==o&&"unpublished"!==o||null!==f&&f.detach()})},[t,r,o,i]),De().createElement("div",{className:"janus-subscriber"},De().createElement("div",{className:"janus-video"},De().createElement(Ge,{ref:a,isPublisher:!1,status:c})))};function $e(e,t,n){var r=null;return e.attach({plugin:"janus.plugin.streaming",opaqueId:t,success:function(e){r=e,Pe.log("Plugin attached! ("+r.getPlugin()+", id="+r.getId()+")");var t={request:"list"};Pe.debug("Sending message ("+JSON.stringify(t)+")"),r.send({message:t,success:function(e){if(void 0!==e.list&&null!==e.list){var t=e.list;for(var o in Pe.log("Got a list of available streams"),Pe.log(t),t)Pe.log("  >> ["+t[o].id+"] "+t[o].description+" ("+t[o].type+")");n(r,"list",t)}}})},error:function(e){Pe.error("  -- Error attaching plugin...",e),n(r,"error",e)},onmessage:function(e,t){Pe.debug(" ::: Got a message :::"),Pe.debug(e);var o=e.result;if(null!=o){if(void 0!==o.status&&null!==o.status){var i=o.status;if("starting"===i)n(r,"starting");else if("started"===i)n(r,"started");else if("stopped"===i){var a={request:"stop"};r.send({message:a}),r.hangup()}}else if("event"===e.streaming){var s=o.substream,c=o.temporal;null==s&&null==c||n(r,"simulcastStarted");var d=o.spatial_layer;c=o.temporal_layer,null==d&&null==c||n(r,"svcStarted")}}else if(void 0!==e.error&&null!==e.error)return a={request:"stop"},r.send({message:a}),void r.hangup();null!=t&&(Pe.debug("Handling SDP as well..."),Pe.debug(t),r.createAnswer({jsep:t,media:{audioSend:!1,videoSend:!1},success:function(e){Pe.debug("Got SDP!"),Pe.debug(e),r.send({message:{request:"start"},jsep:e})},error:function(e){Pe.error("WebRTC error:",e)}}))},onremotestream:function(e){n(r,"onremotestream",e)},onremotetrack:function(e,t,o){if(console.log("Remote track event:",e.kind,t,o?"added":"removed"),o&&"video"===e.kind){var i=new MediaStream([e]);n(r,"onremotetrack",i,t)}},oncleanup:function(){n(r,"oncleanup")},onlocalstream:function(e){}}),r}const Xe=De().forwardRef(function(e,t){var n=e.isPublisher,r=e.status,o=e.isMuted,i=e.onStart,a=e.onStop,s=e.onMute,c=e.onUnmute,d=e.onBandwidthChange,u=e.enableCustomControl,l=e.customVideoControls,p=e.overlayImage,f=e.bitrate,h=e.cropperActive,m=e.showFramesRate;return e.playPauseButton,De().createElement("div",{className:"janus-video-container"},p||h?"":m?De().createElement("div",{className:"janus-video-status"},f):"",p,De().createElement("div",{className:"video-react-controls-enabled video-react-has-started video-react-playing video-react-fluid video-react-user-inactive video-react-workinghover video-react",role:"region",tabIndex:"-1",style:{paddingTop:"56.25%;"}},De().createElement("video",{class:"video-react-video",ref:t,autoplay:!0,muted:!0,playsInline:!0,width:"100%",height:"100%"})),u&&l&&De().createElement("div",{className:"janus-control-bar-align-top"},l),n&&De().createElement("div",{className:"janus-video-controls"},"Paused"===r&&De().createElement("div",{className:"janus-btn",onClick:i},"Start Recording"),"Live"===r&&De().createElement("div",{className:"janus-btn",onClick:a},"Stop Recording"),"Live"===r&&De().createElement(De().Fragment,null,o&&De().createElement("div",{className:"janus-btn",onClick:c},"UnMute"),!o&&De().createElement("div",{className:"janus-btn",onClick:s},"Mute")),De().createElement("div",{className:"janus-select"},De().createElement("select",{onChange:function(e){d(1e3*parseInt(e.target.value))}},De().createElement("option",{value:0},"Auto"),De().createElement("option",{value:128},"128 kbit"),De().createElement("option",{value:256},"256 kbit"),De().createElement("option",{value:512},"512 kbit"),De().createElement("option",{value:1e3},"1 mbit"),De().createElement("option",{value:1500},"1.5 mbit"),De().createElement("option",{value:2e3},"2 mbit")))))});function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Qe=De().forwardRef(function(e,t){var n=e.janus,r=e.opaqueId,o=e.streamId,i=e.enableCustomControl,a=e.customVideoControls,s=e.overlayImage,c=e.cropperActive,d=e.setRecordedPlaybleFile,u=e.showFramesRate,l=e.playPauseButton,p=e.streamIsLive,f=e.networkStatus,h=e.isRecordPreviewActive,m=t,v=Ke((0,je.useState)("Ready"),2),g=v[0],y=v[1],b=Ke((0,je.useState)(null),2),S=b[0],C=b[1],w=Ke((0,je.useState)(null),2),T=(w[0],w[1]),k=Ke((0,je.useState)(""),2),x=k[0],E=k[1],R=Ke((0,je.useState)(null),2),P=R[0],j=R[1],D=(0,je.useRef)(!1),I=null,A=null;(0,je.useEffect)(function(){var e=!1;if(n||e)return e||($e(n,r,M),A=setInterval(function(){$e(n,r,M)},2e3)),function(){e=!0,clearInterval(A),A=null}},[n]),(0,je.useEffect)(function(){"down"===f&&!D.current&&S&&(D.current=!0,console.log("[JanusStreamer] Network down detected. Restarting stream..."),S.send({message:{request:"stop"}}),S.hangup(),setTimeout(function(){$e(n,r,M),!1===h&&p(!1)},2e3)),"up"===f&&(D.current=!1)},[f]);var _=function(e){d()},O=function(e){console.log("[JanusStreamer] Live Stream Playing",e),null!==m.current&&m.current.play(),p(!0)},M=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"v";if(C(e),"onremotetrack"===t&&null!==m.current){I=n,console.log("[Attaching stream to the video element]",m);var i=m.current;Pe.attachMediaStream(i,I),i.play(),i.addEventListener("error",_),i.addEventListener("play",O),"completed"!==e.webrtcStuff.pc.iceConnectionState&&"connected"!==e.webrtcStuff.pc.iceConnectionState&&y("Live");var a=I.getVideoTracks();null!=a&&0!==a.length||y("Error"),clearInterval(A),A=null,E(r),console.log("[Attached video stream bitrate :]",e.getBitrate(r)),j(e.getBitrate(r))}else"oncleanup"===t?y("Paused"):"error"===t?y("Error"):"list"===t&&(T(n),function(e,t){if(Pe.log("Selected video id #"+t),null!=t){var n={request:"watch",id:parseInt(t)};e.send({message:n})}}(e,o))},N=S&&x?S.getBitrate(x):P;return De().createElement("div",null,De().createElement(Xe,{ref:m,isPublisher:!1,status:g,customVideoControls:a,enableCustomControl:i,overlayImage:s,bitrate:N,cropperActive:c,showFramesRate:u,playPauseButton:l}))})})(),o})());